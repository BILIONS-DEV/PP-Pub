(()=>{var e={926:e=>{e.exports={SelectSize:function(){$("#adsense_ad_slot_item").on("changed.bs.select",".select-adsense-ad-slot-size",(function(e){var t=$(e.currentTarget),a=t.val();if(a){if($("#adsense_ad_slot_item").find("#adsense-ad-slot-"+a).length)return new AlertError("Size already exists");var i=t.closest(".box-c").find("input").attr("data-size");i&&$("#tab-google").find(".size-"+i).prop("disabled",!1),t.closest(".box-c").find("input").attr("id","adsense-ad-slot-"+a).attr("data-size",a),$("#tab-google").find(".size-"+a).prop("disabled",!0),$("#adsense_ad_slot_item").find(".select-adsense-ad-slot-size").each((function(){$(this).selectpicker("refresh")})),$.each(this.options,(function(e,t){t.selected&&$(t).prop("disabled",!0)}))}}))},RemoveSize:function(){$("#adsense_ad_slot_item").on("click",".remove-ad-slot",(function(){var e=$(this).data("size");$("#size-"+e).prop("disabled",!1),$(this).parents("div.box-c").remove()}))},AddAdSlot:function(){$(".add-adslot").click((function(){$(".adslot-sample").clone().prependTo("#adsense_ad_slot_item"),$("#adsense_ad_slot_item").find(".adslot-sample").removeClass("adslot-sample"),$("#adsense_ad_slot_item").find(".select-adsense-ad-slot-size").each((function(){$(this).selectpicker("refresh")}))}))}}}},t={};function a(i){var n=t[i];if(void 0!==n)return n.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,a),r.exports}(()=>{"use strict";function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var t=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.targetPrebid=e.targetPrebid,this.showHideSelectBidder=e.showHideSelectBidder||!1,this.urlLoadParam=e.urlLoadParam,this.typeSelect=e.typeSelect||"select2",this.ajaxAddParam=e.ajaxAddParam,this.isCheckParamRequired=e.isCheckParamRequired||!1,this.wrapperBox=e.wrapperBox||"",this.initCss(),this.initTabConfig()}var a,i,n;return a=t,i=[{key:"initCss",value:function(){var e=document.createElement("style");e.type="text/css",e.id="css-for-prebid-tabs",e.innerHTML="\n    .col-md-4 .w-50-custom{\n      width:100%!important;\n    }\n    .w-input-group.w-input-group-small-width{\n      min-width: 150px;\n    }\n\n    .nav-item-tab-setup{\n        font-size: 0.75rem;\n    }\n\n    .tab-prebid-wrapper{\n        position: relative;\n    }\n\n    .btn-light.fs-12 {\n        font-size: 0.75rem!important;\n    }\n\n    .muze-collapes .card .card-header .btn-light.fs-12:before {\n        height:  0.75rem; \n    }\n\n    .muze-collapes .card .card-header .btn-light.fs-12:after {\n        width: 0.75rem;\n        right: 4px;\n    }\n\n    .dm2-tab-item{\n        width: 24px;\n        height: 24px;\n        margin: 0 auto;\n    }\n\n    .submit-btn-add-bidder{\n        margin-left: auto;\n        align-items: center;\n    }\n\n    .submit-btn-add-bidder .submit{\n        font-size: 0.75rem;\n        height: 2.5rem;\n        padding: 0.5rem 1rem;\n    }\n\n    .box-c .bidder-box div.bidder-name label.w-input-group.w-input-group-small-width {\n        margin-left: 5px;\n    }\n\n    .select2-custom-width-css{\n        min-width: 250px;\n    }\n\n    \n    .w3-button--config:not(.disabled-config):hover {\n        background-color: #ffc107!important;\n    }\n\n    .w3-button--config.w3-bar--config-item.disabled-config{\n        cursor: not-allowed;\n        opacity: 0.5;\n    }\n\n    .w3-bar--config .w3-button--config {\n        white-space: normal;\n    }\n\n    .w3-bar--config .w3-bar--config-item {\n        padding: 8px 16px;\n        float: left;\n        width: auto;\n        border: none;\n        display: block;\n        outline: 0;\n        text-transform: uppercase;\n        font-weight: bold;\n        font-size: 0.65rem;\n\n        cursor: pointer;\n        background-color: rgb(240, 240, 240);\n        border-left: 1px solid #e2dada;\n        border-bottom: 1px solid #e2dada;\n        border-top: 1px solid #e2dada;\n    }\n\n    .w3-bar--config .w3-bar--config-item:last-child{\n        border-right: 1px solid #e2dada;\n    }\n\n    .w3-bar--config {\n        overflow: hidden;        \n    }\n\n    .active--config:not(.disabled-config){\n        border-color: #ffd657;\n        background: #ffd657;\n    }\n\n    .tooltip-inner{\n        text-align: left;\n    }\n\n    .tooltip{\n        font-size: 12px;\n    }",document.getElementsByTagName("head")[0].appendChild(e)}},{key:"initTabConfig",value:function(){var e=$("#tab-info-js").text();try{window.Tab_Config=JSON.parse(e)||[],window.Tab_Check_Active=[],window.Tab_Config.forEach((function(e){for(var t in e.Available)Object.hasOwnProperty.call(e.Available,t)&&(window.Tab_Check_Active.includes(t)||window.Tab_Check_Active.push(t))}))}catch(e){console.error(e)}}},{key:"idWrapperBox",value:function(e){if(!this.wrapperBox)return"";var t=e.closest(this.wrapperBox).attr("id");return t?"#"+t:""}},{key:"isSelect2",value:function(){return"select2"==this.typeSelect}},{key:"isSelectPicker",value:function(){return"selectpicker"==this.typeSelect}},{key:"selectBidderElement",value:function(){switch(!0){case this.isSelect2():return"select2:select";case this.isSelectPicker():return"changed.bs.select";default:return""}}},{key:"EventClickPrebidTabConfig",value:function(){var e=this;$(".w3-bar--config").on("click",".w3-bar--config-item",(function(t){var a=$(this).data("id");if(!$(this).hasClass("disabled-config")){var i=$("".concat(e.idWrapperBox($(this))," .w3-bar--config .w3-bar--config-item")),n=$(" ".concat(e.targetPrebid," ").concat(e.idWrapperBox($(this))," .tab-prebid-wrapper"));try{n.each((function(){$(this).hasClass("d-none")||$(this).append(Loading())})),setTimeout((function(){i.each((function(){$(this).data("id")==a?$(this).addClass("active--config"):$(this).removeClass("active--config")})),n.each((function(){$(this).attr("id")==a?$(this).removeClass("d-none"):$(this).addClass("d-none")})),n.find("._blur").remove()}),200)}catch(e){}}}))}},{key:"EventLoadParamsAfterSelectBidder",value:function(){var e=this;$(this.targetPrebid).on(this.selectBidderElement(),(function(t){var a;if((a=$(t.target).hasClass("select-bidder")?$(t.target):$(t.target).closest(".select-bidder")).length){var i=$(t.target).closest(".tab-prebid-wrapper"),n={id:a.find(":selected").val(),text:a.find(":selected").text()},r=1+$(e.targetPrebid+e.idWrapperBox(a)).find('.bidder-box[data-id="'.concat(n.id,'"]')).length,o=i.find('.bidder-box[data-id="'.concat(n.id,'"]')),s="0";o.each((function(){if("1"==$(this).find(":selected").attr("value"))return s="1",!1})),e.LoadBidderParam({id:n.id,name:n.text,index:r,typ:s,wrapper:i}),e.showHideSelectBidder&&i.find(".box-select-bidder").addClass("d-none")}}))}},{key:"LoadBidderParam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.id&&e.name&&e.index&&e.typ&&e.wrapper){var t=this;$.ajax({url:t.urlLoadParam,type:"GET",data:{id:e.id,name:e.name,index:e.index,type:e.typ},success:function(a){e.wrapper.find("#bidder-params").prepend(a.data),t.handleSelect(e)},error:function(e){console.error(e)}})}}},{key:"handleSelect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.wrapper?(this.isSelect2()&&(e.wrapper.find(".select-bidder").val(null).trigger("change"),this.InitSelect2({wrapper:e.wrapper})),this.isSelectPicker()&&(e.wrapper.find(".select-bidder").val(""),e.wrapper.find(".select-bidder").selectpicker("refresh"),e.changeBidderType&&e.wrapper.find(".selectpicker.type-bidder").selectpicker("refresh"),this.InitSelectpicker({wrapper:e.wrapper}))):console.error("handleSelect: Wrapper is required")}},{key:"InitSelectpicker",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.wrapper?e.wrapper.find("#bidder-params").find(".selectpicker").selectpicker():console.error("InitSelectpicker: Wrapper is required")}},{key:"InitSelect2",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.wrapper?(e.wrapper.find(".select-bidder").select2({}),$.fn.select2.defaults.set("theme","bootstrap")):console.error("InitSelect2: Wrapper is required")}},{key:"EventAddParam",value:function(){var e=this;$(this.targetPrebid).on("click",".bidder-box .btn-add-param",(function(t){if(e.ajaxAddParam){var a=$(this),i=a.closest(".bidder-box").attr("data-name");$.ajax({type:"GET",url:e.ajaxAddParam,data:{demand:i}}).done((function(t){a.closest(".bidder-box").find(".list_param").append(t);var i=a.closest(".bidder-params-wrapper");e.handleSelectParam({wrapper:i})}))}else $(this).closest(".bidder-box").find(".list_param").append(e.addParamHtml())}))}},{key:"handleSelectParam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.wrapper&&e.wrapper.find(".param-bidder-pb").each((function(){var e=$(this),t=[];e.closest(".list_param").find(".param_value").each((function(){$(this).attr("data-name")&&t.push($(this).attr("data-name"))})),t&&(t.forEach((function(t,a){e.find('[value="'+t+'"]').attr("disabled",!0)})),e.selectpicker("refresh"))}))}},{key:"addParamHtml",value:function(){return'<div class="row my-4 box-param">\n                <div class="d-flex align-items-center">\n                    <div class="w-input-group w-input-group-small-width">\n                        <input class="form-control param_name"\n                               style="width: 150px" placeholder="Param name">\n                    </div>\n                    <div class="w-50-custom d-flex align-items-center box-value">\n                        <input type="number"\n                               class="form-control param_value add-param" placeholder="Value">\n                        <div class="ms-2 ps-0 align-items-center w-25">\n                            <select class="form-select param_type">\n                                <option value="string">String</option>\n                                <option selected="" value="int">Int</option>\n                                <option value="float">Float</option>\n                                <option value="json">Json</option>\n                                <option value="boolean">Boolean</option>\n                            </select>\n                        </div>\n                    </div>\n  \n                    <div class="ms-2 ps-0 d-flex align-items-center">\n                        <button type="button"\n                                class="btn btn-outline-danger btn-sm px-2 rounded-2 btn-remove-param d-none">\n                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"\n                                 class="bi bi-trash" viewBox="0 0 16 16">\n                                <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"></path>\n                                <path fill-rule="evenodd"\n                                      d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"></path>\n                            </svg>\n                        </button>\n                    </div>\n                    <span class="form-text ms-2 w-auto invalid-feedback"></span>\n                </div>\n            </div>'}},{key:"inputParam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.type)switch(e.type){case"string":case"json":return'<input type="text" class="form-control param_value add-param" placeholder="Value">';case"int":case"float":return'<input type="number" class="form-control param_value add-param" placeholder="Value">';case"boolean":return'\n        <select class="form-select param_value add-param">\n            <option value="true">true</option>\n            <option value="false">false</option>\n        </select>\n        '}else console.error("inputParam: Type is required")}},{key:"EventChangeTypeParam",value:function(){var e=this;$(this.targetPrebid).on("change",".bidder-box .param_type",(function(t){var a=$(this).val();$(this).closest(".box-value").find(".param_value").remove(),$(this).closest(".box-value").prepend(e.inputParam({type:a}))}))}},{key:"EventSelectBidderType",value:function(){var e=this;$(this.targetPrebid).on("change","#bidder-params div.bidder-box select.type-bidder",(function(t){var a=$(this).closest(".tab-prebid-wrapper"),i=$(this).data("id"),n=$(this).data("index"),r=a.find("#type_".concat(i,"_").concat(n," option[value='1']")),o=a.find("select.b-t-".concat(i,' option[value="1"]'));"1"===$(this).val()?(o.attr("disabled",!0),r.attr("disabled",!1)):o.attr("disabled",!1),e.handleSelect({wrapper:a,changeBidderType:!0})}))}},{key:"EventRemoveParam",value:function(){var e=this;$(".bidder-params-wrapper").on("click",".list_param .btn-remove-param",(function(t){e.RemoveParam({element:this})}))}},{key:"RemoveParam",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.element){if(this.isCheckParamRequired&&(e=this.checkParamRequired(t)),!e){var a=this;1===$(t.element).closest(".list_param").find("div.box-param").length?swal({title:"Are you sure?",text:"This is the last Params if you delete this demand you will delete!",icon:"warning",buttons:!0,dangerMode:!0}).then((function(e){e&&a.RemoveBidder({element:$(t.element).closest(".bidder-box").find(".d a.rm_c")})})):$(t.element).closest(".box-param").remove()}}else console.error("RemoveParam: Missing element")}},{key:"checkParamRequired",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.element){var t=!1,a=$(e.element).closest(".bidder-box").data("name"),i=$(e.element).closest(".box-param").find(".param_value").data("name");return $.ajax({url:this.isCheckParamRequired,type:"GET",async:!1,data:{name:a,param:i},success:function(a){a.required&&(t=!0,$(e.element).closest(".box-param").find(".param_value").addClass("is-invalid").nextAll("span.invalid-feedback").text("(*) param required don't remove"))},error:function(e){console.log(e)}}),t}console.error("checkParamRequired: Missing opts")}},{key:"EventRemoveBidder",value:function(){var e=this;$(".bidder-params-wrapper").on("click","div.bidder-box .d a.rm_c",(function(){e.RemoveBidder({element:$(this)})}))}},{key:"RemoveBidder",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.element){var t=e.element.closest(".tab-prebid-wrapper"),a=e.element.closest(".bidder-box").find(".type-bidder");if("1"==a.find(":selected").attr("value")){var i=a.data("id");t.find("select.b-t-".concat(i,' option[value="1"]')).attr("disabled",!1)}e.element.closest(".box-c").remove(),this.showHideSelectBidder&&0===t.find(".box-c").length&&t.find(".box-select-bidder").removeClass("d-none")}else console.error("RemoveBidder: Missing element")}},{key:"EventToggleBttRemoveParam",value:function(){$(".bidder-params-wrapper").on({mouseenter:function(){$(this).find(".btn-remove-param").removeClass("d-none")},mouseleave:function(){$(this).find(".btn-remove-param").addClass("d-none")}},".list_param .box-param")}},{key:"newTabActive",value:function(){var e={};return window.Tab_Config.forEach((function(t){for(var a in e[t.Id]={list:{}},t.Available)Object.hasOwnProperty.call(t.Available,a)&&(e[t.Id].list[a]=!0)})),e}},{key:"handleDisabledTabs",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.newTabActive();if(window.Tab_Check_Active.includes(e.optionAjax)||e.force){for(var n in t.forEach((function(e){if(window.Tab_Check_Active.includes(e.optionAjax)){var t=e.list_selected.map((function(e){return e.name}));t.length>0&&window.Tab_Config.forEach((function(a){var n=a.Available[e.optionAjax].List,r=!1;if(n)if(1==n.length&&"all"==n[0])r=!0;else for(var o=0;o<t.length;o++)if(n.includes(t[o])){r=!0;break}r||(i[a.Id].list[e.optionAjax]=!1,i[a.Id].tabConfig=a)}))}})),window.Tab_Config.forEach((function(e){var a,n=e.MultiConditonal;if(n){var r=Object.keys(n).length,o=0;e:for(var s in n)if(Object.hasOwnProperty.call(n,s)){for(var d=!1,l=0;l<t.length;l++)if(t[l].optionAjax==s){d=!0;var c=n[s].List;if(0==t[l].list_selected.length){o++;continue e}for(var p=0;p<t[l].list_selected.length;p++)if(c.includes(t[l].list_selected[p].name)){o++;continue e}d=!1;break}if(!d){a=!1;break}}a=o==r}else a=!1;a&&i[e.Id]&&(i[e.Id].active=!0)})),i)if(Object.hasOwnProperty.call(i,n)){var r=i[n],o=!0;if(!r.active)for(var s in r.list)if(Object.hasOwnProperty.call(r.list,s)&&0==r.list[s]){o=!1;break}o?this.enabledTab({Id:n,target:a.target}):this.disabledTab({Id:n,tabConfig:r.tabConfig,target:a.target})}var d=$("".concat(this.idWrapperBox(a.target)," .active--config.disabled-config"));if(0!=d.length){var l=!1;$("".concat(this.idWrapperBox(a.target)," .w3-bar--config-item")).each((function(){if(!$(this).hasClass("disabled-config"))return $(this).click(),l=!0,!1})),l&&d.removeClass("active--config")}}}},{key:"disabledTab",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=$("".concat(this.idWrapperBox(e.target),' .w3-bar--config-item[data-id="tab-prebid-').concat(e.Id,'"]'));t.addClass("disabled-config");var a="This config is only available with:";if(e.tabConfig){if(e.tabConfig.Available){a+="<br>";var i="";for(var n in e.tabConfig.Available)if(Object.hasOwnProperty.call(e.tabConfig.Available,n)){var r=e.tabConfig.Available[n];a+=i+r.Name+": "+r.List.join(", ")+".",""==i&&(i="<br>")}}if(e.tabConfig.MultiConditonal){a+="<br>";var o="";for(var s in e.tabConfig.MultiConditonal)if(Object.hasOwnProperty.call(e.tabConfig.MultiConditonal,s)){var d=e.tabConfig.MultiConditonal[s];a+=o+d.Name+": "+d.List.join(", "),""==o&&(o=" & ")}a+="."}}t.tooltip("dispose"),t.tooltip({html:!0,title:a})}},{key:"enabledTab",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=$("".concat(this.idWrapperBox(e.target),' .w3-bar--config-item[data-id="tab-prebid-').concat(e.Id,'"]'));t.tooltip("dispose"),t.removeClass("disabled-config")}},{key:"buttonAddBidder",value:function(){var e=this;$(this.targetPrebid).on("click",".add-bidder",(function(t){var a=$(t.target).closest(".tab-prebid-wrapper");a&&(a.find(".box-select-bidder").removeClass("d-none"),e.InitSelectpicker({wrapper:a}))}))}},{key:"SelectParamPB",value:function(){var e=this;$(this.targetPrebid).on("changed.bs.select",".param-bidder-pb",(function(t){var a=$(this).val();if(a){var i=$(this).closest(".bidder-box").attr("data-id"),n=$(this).closest(".bidder-box").attr("data-index"),r=$(this).find('[value="'+a+'"]').attr("data-example"),o=$(this).find('[value="'+a+'"]').attr("data-type"),s=$(this).find('[value="'+a+'"]').attr("data-type");switch(o){case"int":case"integer":case"number":case"float":case"decimal":s="int",r=o="number";break;case"float":case"decimal":s="float",r=o="number";break;case"boolean":case"bool":o="boolean",s="boolean";break;case"string":o="text",s="string",r="string";break;default:o="text"}var d="";(d="boolean"==o?'<div class="center-selectpicker pp-9">\n                            <select id="'+i+"-"+a+"-"+n+'"\n                                    class="form-control selectpicker param_value add-param"\n                                    data-type="boolean"\n                                    data-name="'+a+'">\n                                <option value="true">true</option>\n                                <option value="false">false</option>\n                            </select>\n                        </div>':'<input style="border-left: 0;border-radius: 0px;" type="'+o+'"\n                               class="pp-10 param_value add-param"\n                               id="'+i+"-"+a+"-"+n+'"\n                               placeholder="'+r+'"\n                               data-type="'+s+'"\n                                data-name="'+a+'">')&&($(this).closest(".box-param").find(".result-param-value").html(d),e.InitSelectpicker({wrapper:$(this).closest(".tab-prebid-wrapper")}))}}))}},{key:"firstLoadBidderDisabled",value:function(){$(this.targetPrebid).find(".tab-prebid-wrapper").each((function(){var e=$(this);e.find(".type-bidder").each((function(){if(1==$(this).val()){var t=$(this).data("id");e.find(".type-bidder[data-id='".concat(t,"'")).each((function(){2==$(this).val()&&$(this).find("[value='1']").attr("disabled",!0)}))}}))}))}},{key:"activeInFirstLoad",value:function(){$(".w3-bar--config").each((function(){if(0==$(this).find(".active--config").length)try{$(this).find(".w3-bar--config-item.w3-button--config:not(.disabled-config)").first().click()}catch(e){}}))}}],i&&e(a.prototype,i),n&&e(a,n),t}();const i=t;var n=a(926),r={targetPrebid:"#tab-prebid",formId:"EditBidder",urlLoadParam:"/line-item-v2/loadParam",urlSubmit:"/line-item-v2/edit",showHideSelectBidder:!0,typeSelect:"selectpicker",ajaxAddParam:"/line-item-v2/addParamBidder",isCheckParamRequired:"/line-item-v2/checkParam",isEdit:!0,topLoading:"15%",elementLoading:"#tab-prebid",colorLoading:"#adadad"},o=new i(r),s={idSelect:"#list_inventory",idBox:".box_inventory",idIsMoreData:"#is_more_inventory",isMoreData:!0,lastPage:!1,page:2,isSearch:!1,search:"",idSearch:"#search_inventory",urlAjax:"/target/loadInventory",optionAjax:"domain",filterAjax:[],list_selected:[],btnInclude:"add_inventory",btnRemove:"remove_inventory",idEmpty:"empty_ad_domain",text:"#text_for_domain",btnRemoveAll:"remove_all_domain",btnSelectAll:"select_all_domain",block:".block_domain",container:".container_domain",boxEmpty:"box_empty_domain",checkLoadMore:!1},d={idSelect:"#list_ad_tag",idBox:".box_ad_tag",idIsMoreData:"#is_more_tag",isMoreData:!0,lastPage:!1,page:2,isSearch:!1,search:"",idSearch:"#search_ad_tag",urlAjax:"/target/loadInventory",optionAjax:"adtag",filterAjax:[],list_selected:[],btnInclude:"add_tag",btnRemove:"remove_tag",idEmpty:"empty_ad_tag",text:"#text_for_tag",btnRemoveAll:"remove_all_tag",btnSelectAll:"select_all_tag",block:".block_tag",container:".container_tag",boxEmpty:"box_empty_tag",checkLoadMore:!1},l={idSelect:"#list_ad_format",idBox:".box_ad_format",idIsMoreData:"#is_more_adformat",isMoreData:!0,lastPage:!1,page:2,isSearch:!1,search:"",idSearch:"#search_ad_format",urlAjax:"/target/loadInventory",optionAjax:"adformat",filterAjax:[],list_selected:[],btnInclude:"add_format",btnRemove:"remove_adFormat",idEmpty:"empty_ad_format",text:"#text_for_format",btnRemoveAll:"remove_all_format",btnSelectAll:"select_all_format",block:".block_format",container:".container_format",boxEmpty:"box_empty_format",checkLoadMore:!1},c={idSelect:"#list_ad_size",idBox:".box_ad_size",idIsMoreData:"#is_more_adsize",isMoreData:!0,lastPage:!1,page:2,isSearch:!1,search:"",idSearch:"#search_ad_size",urlAjax:"/target/loadInventory",optionAjax:"adsize",filterAjax:[],list_selected:[],btnInclude:"add_size",btnRemove:"remove_adSize",idEmpty:"empty_ad_size",text:"#text_for_size",btnRemoveAll:"remove_all_size",btnSelectAll:"select_all_size",block:".block_size",container:".container_size",boxEmpty:"box_empty_size",checkLoadMore:!1},p={idSelect:"#list_geography",idBox:".box_geography",idIsMoreData:"#is_more_geography",isMoreData:!0,lastPage:!1,page:2,isSearch:!1,search:"",idSearch:"#search_geography",urlAjax:"/target/loadInventory",optionAjax:"geography",list_selected:[],btnInclude:"add_country",btnRemove:"remove_Geo",idEmpty:"empty_ad_geo",text:"#text_for_geo",btnRemoveAll:"remove_all_geo",btnSelectAll:"select_all_geo",block:".block_geo",container:".container_geo",boxEmpty:"box_empty_geo",checkLoadMore:!1},f={idSelect:"#list_device",idBox:".box_device",idIsMoreData:"#is_more_device",isMoreData:!0,lastPage:!1,page:2,isSearch:!1,search:"",idSearch:"#search_device",urlAjax:"/target/loadInventory",optionAjax:"device",list_selected:[],list_original:[],btnInclude:"add_device",btnRemove:"remove_device",idEmpty:"empty_ad_device",text:"#text_for_device",btnRemoveAll:"remove_all_device",btnSelectAll:"select_all_device",block:".block_device",container:".container_device",boxEmpty:"box_empty_device",checkLoadMore:!1};$(document).ready((function(){var e,t,a,i;s.isMoreData="true"===$("#is_more_inventory").val(),s.lastPage="true"===$("#last_page_domain").val(),l.isMoreData="true"===$("#is_more_adformat").val(),l.lastPage="true"===$("#last_page_format").val(),c.isMoreData="true"===$("#is_more_adsize").val(),c.lastPage="true"===$("#last_page_size").val(),d.isMoreData="true"===$("#is_more_tag").val(),d.lastPage="true"===$("#last_page_tag").val(),p.isMoreData="true"===$("#is_more_geography").val(),p.lastPage="true"===$("#last_page_geo").val(),f.isMoreData="true"===$("#is_more_device").val(),f.lastPage="true"===$("#last_page_device").val(),b(s),b(d),b(l),b(c),b(p),b(f),S(),n.SelectSize(),n.RemoveSize(),n.AddAdSlot(),u(),$("#select_account").on("changed.bs.select",(function(){var e=$("#select_account").find("option:selected",this).attr("data-type").trim(),t=$("#select_account").find("option:selected",this).attr("data-system");if("Adx"===e&&"true"===t){$("#select_connection_type option").remove();var a=new Option("MCM","3",!1,!0);$("#select_connection_type").append(a).selectpicker("refresh"),m(!0,$(this).val())}else if(!$("#select_connection_type").find("option[value='1']").length){$("#select_connection_type option").remove();var i=new Option("Ad units","1",!1,!0),n=new Option("Line items","2",!1,!1);$("#select_connection_type").append(i).append(n).selectpicker("refresh"),m(!0,$(this).val())}h($("#select_connection_type").val()),u()})),$("#select_connection_type").on("changed.bs.select",(function(){h($(this).val()),u()})),$("#select_line_item_type").on("changed.bs.select",(function(){u()})),$(r.targetPrebid).hasClass("d-none")||(e=[s,d,l,c,p],o.handleDisabledTabs({force:!0},e),o.firstLoadBidderDisabled(),o.buttonAddBidder(),o.EventLoadParamsAfterSelectBidder(),o.EventClickPrebidTabConfig(),o.EventAddParam(),o.SelectParamPB(),o.EventSelectBidderType(),o.EventRemoveParam(),o.EventRemoveBidder(),o.activeInFirstLoad()),$(".line-item-tab").on("click",".nav-link",(function(){$(".line-item-tab").find(".nav-link").removeClass("pp-4"),$(this).addClass("pp-4"),"1"!=$(this).attr("data-tab")?$(this).addClass("at-1"):$(".line-item-tab").find(".at-1").removeClass("at-1")})),$('[data-toggle="collapse"]').on("click",(function(){var e=$(this);e.toggleClass("dm14"),e.hasClass("dm14")?e.find(".dm23").find("button").html('<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" class="bi bi-dash-lg" viewBox="0 0 16 16">\n<path d="M0 8a1 1 0 0 1 1-1h14a1 1 0 1 1 0 2H1a1 1 0 0 1-1-1z">\n</path>\n</svg>'):e.find(".dm23").find("button").html('<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" class="bi bi-plus-lg" viewBox="0 0 16 16">\n<path d="M8 0a1 1 0 0 1 1 1v6h6a1 1 0 1 1 0 2H9v6a1 1 0 1 1-2 0V9H1a1 1 0 0 1 0-2h6V1a1 1 0 0 1 1-1z"></path>\n</svg>'),$("#nav-target").find('[data-toggle="collapse"]').each((function(){e[0]!=$(this)[0]&&($(this).removeClass("dm14"),$(this).find(".dm23").find("button").html('<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" class="bi bi-plus-lg" viewBox="0 0 16 16">\n<path d="M8 0a1 1 0 0 1 1 1v6h6a1 1 0 1 1 0 2H9v6a1 1 0 1 1-2 0V9H1a1 1 0 0 1 0-2h6V1a1 1 0 0 1 1-1z"></path>\n</svg>'))}))})),t=new URLSearchParams(window.location.search),a=Object.fromEntries(t.entries()),i="/line-item-v2/collapse",$("#EditBidder").on("show.bs.collapse",".collapse",(function(e){var t=e.target.id;!function(e,t,a,i){$.ajax({url:e,type:"POST",dataType:"JSON",contentType:"application/json",data:JSON.stringify({is_collapse:2,box_collapse:t,page_type:i,page_id:a}),beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined")},error:function(e,t){}}).done((function(e){}))}(i,t,parseInt(a.id),"edit")})),$("#EditBidder").on("hide.bs.collapse",".collapse",(function(e){var t=e.target.id;!function(e,t,a,i){$.ajax({url:e,type:"POST",dataType:"JSON",contentType:"application/json",data:JSON.stringify({is_collapse:1,box_collapse:t,page_type:i,page_id:a}),beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined")},error:function(e,t){}}).done((function(e){}))}(i,t,parseInt(a.id),"edit")})),$(".btn-collapse").click((function(e){$(this).hasClass("collapsed")?$(this).find(".text-notify-target").removeClass("d-none"):($(".text-notify-target").removeClass("d-none"),$(this).find(".text-notify-target").addClass("d-none"))})),$('[data-bs-toggle="popover"]').popover({html:!0,sanitize:!1}),function(){var e=$("#"+r.formId);function t(){var t,a,i=e.serializeObject();if(i.listInventory=s.list_selected,i.listGeo=p.list_selected,i.listDevice=f.list_selected,i.listAdtag=d.list_selected,i.listAdFormat=l.list_selected,i.listAdSize=c.list_selected,i.priority=parseInt(i.priority),i.type=parseInt(i.type),i.connection_type=parseInt(i.connection_type),i.line_item_type=parseInt(i.line_item_type),i.server_type=r.isEdit?parseInt($("#server_type").val()):parseInt(i.server_type),i.rate=parseInt(i.rate),i.linked_gam=parseInt(i.linked_gam),i.bidder_params=(t=[],$("".concat(r.targetPrebid," div.box-c > div.bidder-box")).each((function(){var e=$(this).closest(".tab-prebid-wrapper").attr("id"),a=$(this);if(""!==$(this).attr("data-name")){var i={};i.id=parseInt($(this).attr("data-id")),i.name=$(this).attr("data-name").toLowerCase(),i.bidder_type=parseInt($(this).find("select.type-bidder").val()),i.bidder_index=parseInt($(this).attr("data-index")),i.config_type=e.replace("tab-prebid-","");var n={};a.find(".param_value").each((function(){if(!$(this).attr("data-name"))return!0;if($(this).hasClass("add-param")){var e=$(this).attr("data-type").toLowerCase(),t=$(this).attr("data-name").trim();$(this).attr("id",i.id+"-"+t+"-"+i.bidder_index),void 0===n[t]&&(n[t]={type:e,value:this.value.trim(),addParam:1})}else{var a=$(this).attr("data-type").toLowerCase(),r=$(this).attr("data-name");n[r]={type:a,value:this.value.trim(),addParam:2}}})),i.params=n,t.push(i)}})),t),i.adsense_ad_slots=(a=[],$("#adsense_ad_slot_item > div.box-c > .param_value").each((function(){var e={},t=$(this).data("size"),i=$(this).val().trim();e.size=t,e.ad_slot_id=i,a.push(e)})),a),!Array.isArray(i.select_account)){var n=[];""!==i.select_account&&n.push(parseInt(i.select_account)),i.select_account=n}r.isEdit&&(i.id=parseInt(i.id));var o=JSON.stringify(i),v=$(".submit");$.ajax({url:r.urlSubmit,type:"POST",dataType:"JSON",contentType:"application/json",data:o,beforeSend:function(e){v.attr("disabled",!0).text("Loading...")},error:function(e,t){var a=AjaxErrorMessage(e,t);new AlertError("AJAX ERROR: "+a),v.attr("disabled",!1).text("Submit")},success:function(e){v.attr("disabled",!1).text("Submit")},complete:function(e){!function(e){switch(e.status){case"error":if(1===e.errors.length&&""===e.errors[0].id)new AlertError(e.errors[0].message);else if(e.errors.length>0){if($.each(e.errors,(function(t,a){if("select-adsense-ad-slot-size"===a.id){var i=$("body").find("#adsense_ad_slot_item");i.addClass("is-invalid").find("span.invalid-feedback").text(a.message),i.find(".param_value").addClass("is-invalid")}var n=$("body").find("#"+a.id);if(n.addClass("is-invalid").nextAll("span.invalid-feedback").text(a.message),n.parent().addClass("is-invalid").nextAll("span.invalid-feedback").text(a.message),"text_for_domain"===a.id){var r=a.message;n.html('<small class="text-danger">'.concat(r,"</small>")),$(".domain-card").addClass("domain-card-invalid"),$("#collapseDomains").collapse("show"),$('div[href="#collapseDomains"]').addClass("dm14"),1==e.errors.length&&$("#tab-target").click()}})),!$(r.targetPrebid).hasClass("d-none"))try{var t=$("#"+e.errors[0].id).closest(".tab-prebid-wrapper");t.length&&t.hasClass("d-none")&&$('.w3-bar--config-item[data-id="'.concat(t.attr("id"),'"]')).click()}catch(e){}$("#"+e.errors[0].id).focus(),$("#"+e.errors[0].id).prev("label").focus()}else new AlertError("Error!");break;case"success":""!==$("#select_line_item_type").val()&&$("#select_line_item_type").prop("disabled",!0),NoticeSuccess("Line item has been updated successfully");break;default:new AlertError("Undefined")}}(e.responseJSON)}})}e.on("input",".list_param .param_value",(function(e){var t=$(this);t.hasClass("is-invalid")&&t.removeClass("is-invalid").next(".invalid-feedback").empty();var a=$(this).parent();a.hasClass("is-invalid")&&a.removeClass("is-invalid").nextAll("span.invalid-feedback").empty()})),e.on("keypress","input",(function(e){13===(e.keyCode||e.which)&&(e.preventDefault(),t())})),e.find(".submit").on("click",(function(a){a.preventDefault(),$.each(e.find("input.is-invalid"),(function(){$(this).removeClass("is-invalid").next(".invalid-feedback").empty()})),t()}))}()}));var v={inventory:[],format:[],size:[]};function m(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;$.ajax({url:"/line-item-v2/listLinkedGam",type:"GET",data:{ppAdx:e,bidderAdxId:t},success:function(e){$("#linked_gam option").remove(),$("#linked_gam").selectpicker("refresh"),$.each(e.list_gam,(function(e,t){var a=new Option(t.network_name,t.id,!1,!1);$("#linked_gam").append(a).selectpicker("refresh")}))},error:function(e){console.log(e)}})}function h(e){"2"===e?$(".box_line_item_type").removeClass("d-none"):$(".box_line_item_type").addClass("d-none")}function u(){"2"===$("#server_type").val()&&"Adsense"===$("#select_account").find("option:selected",this).attr("data-type")&&"2"===$("#select_connection_type").val()&&"1"===$("#select_line_item_type").val()?$(".box-adsense-ad-slot").removeClass("d-none"):$(".box-adsense-ad-slot").addClass("d-none")}function b(e){!function(e){var t=$(e.idBox).find("."+e.btnRemove);t.each((function(t,a){var i=parseInt(a.id),n=a.name;switch(e.list_selected.push({id:i,name:n}),e){case s:v.inventory.push(i);break;case l:v.format.push(i);break;case c:v.size.push(i);break;case d:d.filterAjax.push(i)}})),I(e)}(e),g(e),function(e){var t=[s,d,l,c,p];$(e.idSelect).on("click","button."+e.btnInclude,(function(a){!function(e,t,a){t.preventDefault();var i=parseInt(e.data("id")),n=e.attr("name"),r=$(a.idSelect).find("div[id = '".concat(i,"']"));r.remove(),A(i,n,a),k(i,-1,a),a.optionAjax!==d.optionAjax&&S()}($(this),a,e),function(e){var t=$(e.idSelect).get(0);350===t.scrollHeight&&e.isMoreData&&(e.search=$(e.idSearch).val(),e.isSearch=!1,y(e))}(e),x(e),$(this).hasClass("add_inventory")&&$(".domain-card").removeClass("domain-card-invalid"),o.handleDisabledTabs(e,t)})),$(e.idSearch).on("keyup keypress",(function(e){if(13===(e.keyCode||e.which))return e.preventDefault(),!1})),$(e.idSearch).on("input",(function(){e.page=1,e.isSearch=!0,e.lastPage=!1,e.search=$(this).val(),y(e),_(e)})),$(e.block).on("click","a."+e.btnRemoveAll,(function(a){a.preventDefault(),function(e){e.list_selected.map((function(t){C(t.id,t.name,e)})),e.list_selected.map((function(t){switch(e.optionAjax){case s.optionAjax:var a=v.inventory.indexOf(t.id);a>-1&&v.inventory.splice(a,1),d.page=1,d.isSearch=!0,y(d);break;case l.optionAjax:var i=v.format.indexOf(t.id);i>-1&&v.format.splice(i,1),d.page=1,d.isSearch=!0,y(d);break;case c.optionAjax:var n=v.size.indexOf(t.id);n>-1&&v.size.splice(n,1),d.page=1,d.isSearch=!0,y(d);break;case d.optionAjax:var r=d.filterAjax.indexOf(t.id);r>-1&&d.filterAjax.splice(r,1)}})),e.list_selected=[],$(e.idSelect).html(""),e.page=1,e.isSearch=!1,e.isMoreData=!0,y(e),g(e),I(e)}(e),o.handleDisabledTabs(e,t)})),$(e.idBox).on("click","button."+e.btnRemove,(function(a){!function(e,t,a){t.preventDefault();var i=parseInt(e.attr("id")),n=e.attr("name");switch(e.closest(".item_selected").remove(),C(i,n,a),A(i,n,a),a.optionAjax){case s.optionAjax:var r=v.inventory.indexOf(i);r>-1&&v.inventory.splice(r,1),d.page=1,d.isSearch=!0,y(d);break;case l.optionAjax:var o=v.format.indexOf(i);o>-1&&v.format.splice(o,1),d.page=1,d.isSearch=!0,y(d);break;case c.optionAjax:var p=v.size.indexOf(i);p>-1&&v.size.splice(p,1),d.page=1,d.isSearch=!0,y(d);break;case d.optionAjax:var f=d.filterAjax.indexOf(i);f>-1&&d.filterAjax.splice(f,1)}}($(this),a,e),x(e),o.handleDisabledTabs(e,t)}))}(e),_(e)}function g(e){if(0===e.list_selected.length)$(e.idBox).html(""),$(e.idBox).append('<div id="'.concat(e.idEmpty,'" class="d-flex flex-row align-items-center px-md-2" style="height: 25px">\n            <div class="col p-0"><h6\n                        class="m-0 font-weight-semibold fs-12 text-center">\n                    No data selected</h6></div>\n        </div>'));else{$("."+e.btnRemoveAll).attr("hidden",!1);var t="#"+e.idEmpty;$(t).remove()}}function _(e){$(e.idSelect).on("scroll",(function(){var t=$(this).get(0),a=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e+t+1>=a}(Math.round(t.scrollTop),t.clientHeight,t.scrollHeight);a&&e.isMoreData&&(e.search=$(e.idSearch).val(),e.isSearch=!1,e.checkLoadMore||y(e))}))}function x(e){var t=$(e.idSelect).find("div.target-item"),a=$("."+e.boxEmpty);t.length>0?a.length>0&&a.attr("hidden",!0):a.length>0?a.attr("hidden",!1):$(e.idSelect).append('<div class="list-group list-group-flush my-n3 pt-3 '.concat(e.boxEmpty,'">\n                <div class="list-group-item">\n                    <div class="d-flex flex-row align-items-center px-md-2">\n                        <div class="col p-0 text-center"><h6 class="m-0 font-weight-semibold fs-12">No data available</h6></div>\n                    </div>\n                </div>\n            </div>'))}function y(e){var t;e.checkLoadMore=!0,t=0===e.page?e.page+1:e.page;var a=[];e.list_selected.map((function(e){a.push(e.id)})),$.ajax({url:e.urlAjax,type:"GET",data:{key:t,search:e.search,option:e.optionAjax,filter:JSON.stringify(v),selected:JSON.stringify(a)},success:function(t){e.isSearch&&$(e.idSelect).html(""),$(e.idSelect).append(t.data),e.isMoreData=t.is_more_data,$(e.idIsMoreData).val(t.is_more_data),!0===t.is_more_data&&(e.page=t.current_page+1),e.checkLoadMore=!1,e.lastPage=t.last_page,j(e),function(e,t){if(e.optionAjax===d.optionAjax){var a=[];d.list_selected.map((function(e,i){-1===t.indexOf(e.id)&&($(d.idBox).find("div[id = '".concat(e.id,"']")).remove(),a.push(i))}));for(var i=a.length-1;i>=0;i--)d.list_selected.splice(a[i],1);var n=[];$.each(d.filterAjax,(function(e,a){-1===t.indexOf(a)&&n.push(e)}));for(var r=n.length-1;r>=0;r--)d.filterAjax.splice(n[r],1);g(d)}}(e,t.list_filter),I(e),function(e,t,a){t<7&&1===a||(e.lastPage||t>7||0===t)&&($("."+e.boxEmpty).remove(),$(e.idSelect).append('<div class="list-group list-group-flush my-n3 pt-3 '.concat(e.boxEmpty,'">\n        <div class="list-group-item">\n            <div id="').concat(e.idEmptyLoad,'" class="d-flex flex-row align-items-center px-md-2">\n                <div class="col p-0 text-center"><h6 class="m-0 font-weight-semibold fs-12">No data available</h6></div>\n            </div>\n        </div>\n    </div>')))}(e,t.total,t.current_page)},error:function(e){console.log(e)}})}function w(e,t){$.ajax({url:"/target/filterAdTag",type:"POST",contentType:"application/json",data:JSON.stringify({type:t,tagId:e.filterAjax,serverType:parseInt($("#server_type").val())}),success:function(e){!function(e){var t;e.inventory_id.map((function(e){var a=(t=s).list_selected.map((function(e){return e.id})).indexOf(e.id);-1===a&&(t.list_selected.push({id:e.id,name:e.name}),P(e.id,e.name,t)),j(t),I(t),g(t),k(e.id,a,t)})),e.ad_format_id.map((function(e){var a=(t=l).list_selected.map((function(e){return e.id})).indexOf(e.id);-1===a&&(t.list_selected.push({id:e.id,name:e.name}),P(e.id,e.name,t)),j(t),I(t),g(t),k(e.id,a,t)})),e.ad_size_id.map((function(e){var a=(t=c).list_selected.map((function(e){return e.id})).indexOf(e.id);-1===a&&(t.list_selected.push({id:e.id,name:e.name}),P(e.id,e.name,t)),j(t),I(t),g(t),k(e.id,a,t)})),S()}(e)},error:function(e){console.log(e)}})}function k(e,t,a){switch(a.optionAjax){case s.optionAjax:-1===t&&v.inventory.push(e);break;case l.optionAjax:-1===t&&v.format.push(e);break;case c.optionAjax:-1===t&&v.size.push(e);break;case d.optionAjax:d.filterAjax.push(e),w(d,"include")}}function S(){d.page=1,d.isSearch=!0,y(d)}function A(e,t,a){var i=a.list_selected.map((function(e){return e.id})).indexOf(e);-1===i?(a.list_selected.push({id:e,name:t}),P(e,t,a)):a.list_selected.splice(i,1),I(a),g(a)}function C(e,t,a){$(a.idSelect).append('\n    <div class="dm20 target-item" id="'.concat(e,'">\n        <span>').concat(t,'</span>\n        <button class="').concat(a.btnInclude,'" data-id="').concat(e,'" name="').concat(t,'" type="button">\n            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" class="bi bi-plus-lg" viewBox="0 0 16 16">\n                <path d="M8 0a1 1 0 0 1 1 1v6h6a1 1 0 1 1 0 2H9v6a1 1 0 1 1-2 0V9H1a1 1 0 0 1 0-2h6V1a1 1 0 0 1 1-1z"></path>\n            </svg>\n        </button>\n    </div>'))}function P(e,t,a){$(a.idBox).append('\n        <div class="dm20 target-item item_selected" id="'.concat(e,'">\n            <span>').concat(t,'</span>\n            <button class="').concat(a.btnRemove,'" id="').concat(e,'" name="').concat(t,'" type="button">\n                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" class="bi bi-dash-lg" viewBox="0 0 16 16">\n                    <path d="M0 8a1 1 0 0 1 1-1h14a1 1 0 1 1 0 2H1a1 1 0 0 1-1-1z"></path>\n                </svg>\n            </button>\n        </div>'))}function j(e){e.list_selected.map((function(t){$(e.idSelect).find("div[id = '".concat(t.id,"']")).remove()}))}function I(e){var t=e.list_selected.map((function(e){return" ".concat(e.name)})).join(),a=t.length;if(a>40){$(e.text).prev().attr("hidden",!0);var i=t.substring(0,39);$(e.text).html(i+"....")}else if(a>0)$(e.text).prev().attr("hidden",!0),$(e.text).html(t);else switch($(e.text).prev().removeAttr("hidden"),e){case s:$(e.text).html("Choose at least one domain");break;case l:$(e.text).html("all formats");break;case c:$(e.text).html("all sizes");break;case d:$(e.text).html("all ad tags");break;case p:$(e.text).html("all geographies");break;case f:$(e.text).html("all devices")}}})()})();