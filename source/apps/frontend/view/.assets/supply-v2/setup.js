(()=>{function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,a){if(!e)return;if("string"==typeof e)return t(e,a);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,a)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var a,n="#formFilterAdTag",s="#tableAdTags",i="/supply/adtag",o=!0,r="#formFilterConnection",d="/supply-v2/setup",l=1,c=[],p=[],_=[];function u(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"individual_tag_configuration"===$("#BoxAdtag").find("#ad_refresh").val()?($("#BoxAdtag").find(".individual_tag_configuration").removeClass("d-none"),e.autoChange&&$("#BoxAdtag").find("#ad_refresh_time").val(30)):$("#BoxAdtag").find(".individual_tag_configuration").addClass("d-none")}e(),$("#BoxAdtag").find("#ad_refresh").on("change",(function(){e({autoChange:!0})}))}function f(){"lazyload"===$("#load_ad_type").val()?($(".load_ad_type_lazyload").removeClass("d-none"),$("#formGeneral").find("#ad_refresh_type option").prop("disabled",!0),$("#formGeneral").find("#ad_refresh_type").find('option[value="signal reload"]').prop("disabled",!1).prop("selected",!0),$("#formGeneral").find("#ad_refresh_type").selectpicker("refresh")):($(".load_ad_type_lazyload").addClass("d-none"),$("#formGeneral").find("#ad_refresh_type option").prop("disabled",!1),$("#formGeneral").find("#ad_refresh_type").selectpicker("refresh"))}function m(){$("#module-params > div.module_param_box").each((function(){$("input",this).each((function(){var t,a={},n=$(this).attr("data-type"),s=$(this).attr("data-name");switch(t=$(this).attr("data-option"),n){case"string":case"boolean":a.type=n,a.name=s,a.template=this.value;break;case"int":a.type=n,a.name=s,""!==this.value?(a.template=parseInt(this.value),a.template||(a.template=0)):a.template=0;break;case"float":a.type=n,a.name=s,""!==this.value?(a.template=parseFloat(this.value),a.template||(a.template=0)):a.template=0;break;case"json":a.type=n,a.name=s;try{a.template=JSON.parse(this.value)}catch(e){a.template=this.value}}var i={storage:[],params:[]},o=parseInt($(this).attr("data-id")),r=_.map((function(e){return e.id})).indexOf(o);if(-1===r){switch(i.id=o,i.name=$(this).attr("data-module-name"),t){case"storage":i.storage=[a].concat(e(i.storage));break;case"params":i.params=[a].concat(e(i.params))}_.push(i)}else switch(t){case"storage":_[r].storage.push(a);break;case"params":_[r].params.push(a)}}))})),_=Object.values(_)}function b(e,t,a){$.ajax({url:"/supply/loadParam",type:"GET",data:{id:e,name:t,index:a},success:function(e){$("#module-params").prepend(e.data),$("[data-toggle='toggle']").bootstrapToggle("destroy"),$("[data-toggle='toggle']").bootstrapToggle(),h(),$("[data-bs-toggle=popover]").popover()},error:function(e){console.log(e)}})}function g(e){c=c.filter((function(t){return!(t.id===e.toString())})),document.querySelectorAll("#ModuleParamBox-".concat(e)).forEach((function(e){e.remove()}))}function v(){return $("#module-params > div.module_param_box").each((function(){$("input",this).each((function(){var t={},a=$(this).attr("data-option");t.type=$(this).attr("data-type"),t.name=$(this).attr("data-name"),t.template=this.value.trim();var n={storage:[],params:[],ab_testing:0,volume:0},s=parseInt($(this).attr("data-id")),i=p.map((function(e){return e.id})).indexOf(s);if(-1===i){switch(n.id=s,n.name=$(this).attr("data-module-name"),a){case"storage":n.storage=[t].concat(e(n.storage));break;case"params":n.params=[t].concat(e(n.params));break;case"ab_testing":this.checked?n.ab_testing=1:n.ab_testing=2;break;case"volume":n.volume=parseInt(this.value)}p.push(n)}else switch(a){case"storage":p[i].storage.push(t);break;case"params":p[i].params.push(t);break;case"ab_testing":this.checked?p[i].ab_testing=1:p[i].ab_testing=2;break;case"volume":p[i].volume=parseInt(this.value)}}))})),Object.values(p)}function h(){$(".enable_testing").on("change",(function(){var e=$(this).data("module-name");this.checked?$("div#ab_testing_".concat(e)).attr("hidden",!1):$("div#ab_testing_".concat(e)).attr("hidden",!0)}))}function y(e,t){switch(e.status){case"error":1===e.errors.length&&""===e.errors[0].id?new AlertError(e.errors[0].message):e.errors.length>0?($.each(e.errors,(function(e,t){var a=$("#"+t.id);t.id,a.addClass("is-invalid").parent().addClass("is-invalid").nextAll("span.invalid-feedback").text(t.message),a.addClass("is-invalid").nextAll("span.invalid-feedback").text(t.message)})),$("#"+e.errors[0].id).focus()):new AlertError("Error!");break;case"success":new NoticeSuccess("Setup inventory has been successfully");break;default:new AlertError("Undefined")}}function x(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=$(n),d=r.find(".submit"),c=d.text(),p="Loading...",_=r.serializeObject(),u=$("#inventory_id").data("inventory-id"),f={processing:!0,serverSide:!0,searching:!1,destroy:!0,pagingType:"simple",order:[parseInt(_.order_column),_.order_dir],language:{info:"_START_ - _END_ of _TOTAL_",infoEmpty:"0 - 0 of 0",lengthMenu:"Rows per page:  _MENU_",paginate:{next:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16"> <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/> </svg>',previous:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16"> <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/> </svg>'}},dom:'<"row"<"col-sm-12"tr>><"bottom d-flex p-3 border-top border-gray-200"<"row ms-auto align-items-center px-3"<"col-auto"fl><"col-auto"i><"col-auto"p>>>',ajax:{url:i,type:"POST",contentType:"application/json; charset=utf-8",data:function(e){return t&&(_=r.serializeObject(),e.length=parseInt(_.length),e.start=parseInt(_.start),e.order[0].column=parseInt(_.order_column),e.order[0].dir=_.order_dir),a&&(e.start=0,e.order[0].column=0,e.order[0].dir="desc"),r.find("[name='length']").val(e.length),r.find("[name='start']").val(e.start),r.find("[name='order_column']").val(e.order[0].column),r.find("[name='order_dir']").val(e.order[0].dir),_.length=e.length,_.start=e.start,_.inventory_id=parseInt(u),e.postData=_,JSON.stringify(e)},beforeSend:function(e){t&&d.attr("disabled",!0).text(p)},dataSrc:function(e){return t&&d.attr("disabled",!1).text(c),t=!1,_=r.serializeObject(),o?o=!1:(_.tab=l,k(_)),null===e.data?[]:e.data},error:function(e,a){var n=AjaxErrorMessage(e,a);new AlertError(n),t&&d.attr("disabled",!1).text(c)}},columns:[{data:"id",name:"ID"},{data:"name",name:"Name"},{data:"status",name:"Status"},{data:"type",name:"Type"},{data:"size",name:"Size"},{data:"action",name:"Action"}],drawCallback:function(){$(".dataTables_paginate > ul.pagination > li > a.page-link").addClass("text-secondary"),$(".dataTables_paginate > ul.pagination > li.active > a").addClass("bg-warning border-warning").css("color","#111111"),$(".dataTables_length > label > select").removeClass().addClass("form-select form-select-sm"),t||$(".table-responsive").css("height","");[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map((function(e){return new bootstrap.Tooltip(e)}))}};e=parseFloat(_.length),jQuery.inArray(e,[10,25,50,100])>=0&&(f.pageLength=e),f.displayStart=parseFloat(_.start),$(s).DataTable(f)}function k(e){var t=jQuery.param(e).replaceAll("%5B%5D",""),a=d+"&"+t;window.history.pushState("object or string","Title",a),window.history.replaceState("object or string","Title",a)}function A(){var e=parseInt($("#BoxAdtag").find("#passback_type_outstream").val());1==e?($("#BoxAdtag #inline_tag_outstream").closest(".collapsePassbackType").removeClass("d-none"),$("#BoxAdtag #pass_back_outstream").closest(".collapsePassbackType").addClass("d-none")):2==e?($("#BoxAdtag #inline_tag_outstream").closest(".collapsePassbackType").addClass("d-none"),$("#BoxAdtag #inline_tag_outstream").selectpicker("refresh"),$("#BoxAdtag #pass_back_outstream").closest(".collapsePassbackType").removeClass("d-none")):($("#BoxAdtag #inline_tag_outstream").closest(".collapsePassbackType").addClass("d-none"),$("#BoxAdtag #inline_tag_outstream").selectpicker("refresh"),$("#BoxAdtag #pass_back_outstream").closest(".collapsePassbackType").addClass("d-none"))}function C(){$(".slide").on("click",(function(){$(".slide").removeClass("selected"),$(this).addClass("selected");var e=$(this).data("value");$(this).prevAll("#template_play_zone").attr("value",e)}))}function z(){function e(){"1"===$("#content_type").val()?($("#ConfigPlayZoneBox").find(".content_type_quiz").addClass("d-none"),$("#ConfigPlayZoneBox").find(".content_type_related").removeClass("d-none"),$("#slider-container").find(".content_type_related").first().click()):"2"===$("#content_type").val()&&($("#ConfigPlayZoneBox").find(".content_type_related").addClass("d-none"),$("#ConfigPlayZoneBox").find(".content_type_quiz").removeClass("d-none"),$("#slider-container").find(".content_type_quiz").first().click())}e(),$("#content_type").on("change",(function(){e()}))}function I(){function e(){$("#BoxAdtag").find("#enable_sticky_desktop").is(":checked")?($("#BoxAdtag").find(".sticky_desktop").prop("disabled",!1),""===$("#BoxAdtag").find("#size_sticky").val()&&$("#BoxAdtag").find("#additional_ad_size_desktop_stick").prop("disabled",!0),$("#BoxAdtag").find("#enable_sticky_mobile").prop("disabled",!1)):($("#BoxAdtag").find(".sticky_desktop").prop("disabled",!0),$("#BoxAdtag").find("#enable_sticky_mobile").prop("disabled",!0)),$(".selectpicker").selectpicker("refresh")}function t(){$("#BoxAdtag").find("#enable_sticky_mobile").is(":checked")?($("#BoxAdtag").find(".sticky_mobile").prop("disabled",!1),""===$("#BoxAdtag").find("#size_sticky_mobile").val()&&$("#BoxAdtag").find("#additional_ad_size_mobile_stick").prop("disabled",!0),$("#BoxAdtag").find("#enable_sticky_desktop").prop("disabled",!1)):($("#BoxAdtag").find(".sticky_mobile").prop("disabled",!0),$("#BoxAdtag").find("#enable_sticky_desktop").prop("disabled",!0)),$(".selectpicker").selectpicker("refresh")}e(),t(),$("#BoxAdtag").find("#enable_sticky_desktop").on("change",(function(){e()})),$("#BoxAdtag").find("#enable_sticky_mobile").on("change",(function(){t()}))}function B(){$("#BoxAdtag").on("change","#position_sticky",(function(){switch($(this).val()){case"1":case"6":$("#BoxAdtag").find("#size_sticky").empty().append(S(2)).append(S(10)).selectpicker("refresh");break;case"2":case"3":$("#BoxAdtag").find("#size_sticky").empty().append(S(1)).append(S(3)).append(S(4)).selectpicker("refresh")}})),$("#BoxAdtag").on("change","#position_sticky_mobile",(function(){switch($(this).val()){case"4":case"5":$("#BoxAdtag").find("#size_sticky_mobile").empty().append(S(7)).append(S(9)).append(S(19)).append(S(20)).selectpicker("refresh")}}))}function w(){"1"===$("#BoxAdtag #ad_size").val()?($("#BoxAdtag .ad_size_responsive").addClass("d-none"),$("#BoxAdtag .ad_size_fixed").removeClass("d-none")):"2"===$("#BoxAdtag #ad_size").val()&&($("#BoxAdtag .ad_size_fixed").addClass("d-none"),$("#BoxAdtag .ad_size_responsive").removeClass("d-none")),$("#BoxAdtag").on("change","#ad_size",(function(){"1"===$(this).val()?($(".ad_size_responsive").addClass("d-none"),$(".ad_size_fixed").removeClass("d-none")):"2"===$(this).val()&&($(".ad_size_fixed").addClass("d-none"),$(".ad_size_responsive").removeClass("d-none"))}))}function S(e){var t,a;switch(e){case 1:t=1,a="300x250";break;case 2:t=2,a="728x90";break;case 3:t=3,a="160x600";break;case 4:t=4,a="300x600";break;case 7:t=7,a="320x50";break;case 9:t=9,a="320x100";break;case 10:t=10,a="970x90";break;case 19:t=19,a="300x100";break;case 20:t=20,a="300x50"}return'<option selected value="'.concat(t,'">').concat(a,"</option>")}function T(){$("#BoxAdtag").find("#bid_out_stream").is(":checked")?$("#BoxAdtag").find("#bid_out_stream").bootstrapToggle("on"):$("#BoxAdtag").find("#bid_out_stream").bootstrapToggle("off"),$("#BoxAdtag").find("#primary_ad_size").on("change",(function(e){var t=$(this).find("option:selected").text();if($.inArray(t.trim(),["300x250","336x280","300x600","970x250"])>-1?($("#BoxAdtag").find(".box_bid_out_stream").removeClass("d-none"),$("#BoxAdtag").find("#bid_out_stream").bootstrapToggle("on")):($("#BoxAdtag").find(".box_bid_out_stream").addClass("d-none"),$("#BoxAdtag").find("#bid_out_stream").bootstrapToggle("off")),t){var a=t.split("x");parseInt(a[0])>320?$("#BoxAdtag").find(".mobile-config").attr("hidden",!1):($("#BoxAdtag").find(".mobile-config").attr("hidden",!0),$("#BoxAdtag").find("#size_on_mobile").selectpicker("val",""),$("#BoxAdtag").find("#additional_ad_size_mobile").selectpicker("val",""),$("#BoxAdtag").find("#pass_back_mobile").val(""))}}))}function O(){$("#BoxAdtag").find("#primary_ad_size").on("change",(function(e){var t=$("#BoxAdtag").find("#primary_ad_size").val();$("#BoxAdtag").find("#additional_ad_size").selectpicker("refresh"),E(parseInt(t),"#additional_ad_size")})),$("#BoxAdtag").find("#size_on_mobile").on("change",(function(e){var t=$("#BoxAdtag").find("#size_on_mobile").val();$("#BoxAdtag").find("#additional_ad_size_mobile").selectpicker("refresh"),E(parseInt(t),"#additional_ad_size_mobile")}))}function j(){switch($("#BoxAdtag").find(".content_source_sub").attr("hidden",!0),$("#BoxAdtag").find("#content_source").val()){case"1":$("#BoxAdtag").find("div.content_source_sub[data-content_source='1']").attr("hidden",!1);break;case"2":$("#BoxAdtag").find("div.content_source_sub[data-content_source='2']").attr("hidden",!1)}$("#BoxAdtag").find(".content_source_articles_sub").attr("hidden",!0);var e=$("#BoxAdtag").find("#content_source_articles").val();e&&$("#BoxAdtag").find("div.content_source_articles_sub[data-content_source_articles="+e+"]").attr("hidden",!1)}function E(e,t,a){e&&$.ajax({url:"/adtag/getSizeAdditional",type:"GET",data:{id:e,type:a},success:function(e){$("#BoxAdtag").find(t).html("").prop("disabled",!1),$.each(e,(function(e,a){var n=new Option(a.name,a.id,!1,!1);$("#BoxAdtag").find(t).append(n).selectpicker("refresh")}))},error:function(e){console.log(e)}})}function N(e,t){switch(e.status){case"error":1===e.errors.length&&""===e.errors[0].id?new AlertError(e.errors[0].message):e.errors.length>0?($.each(e.errors,(function(e,t){var a=$("#BoxAdtag").find("#"+t.id);a.addClass("is-invalid").nextAll("span.invalid-feedback").text(t.message),a.closest(".box-selectpicker").find(".bs-placeholder").attr("style","border-color:#e35d6a!important"),a.closest(".box-selectpicker").addClass("is-invalid").nextAll("span.invalid-feedback").html(t.message)})),$("#BoxAdtag").find("#"+e.errors[0].id).focus()):new AlertError("Error!");break;case"success":e.data_object.inventory_id;NoticeSuccess("Ad tag has been created successfully"),x(!1,!0),$("#BoxAdtag").find("[data-bs-dismiss=modal]").click(),$("#BoxAdtag").addClass("close-sidebar"),L($("#inventoryTabs").attr("data-id")),setTimeout((function(){$("body").removeClass("customize-box")}),400);break;default:new AlertError("Undefined")}}function J(e,t){switch(e.status){case"error":1===e.errors.length&&""===e.errors[0].id?new AlertError(e.errors[0].message):e.errors.length>0?($.each(e.errors,(function(e,t){var a=$("#BoxAdtag").find("#"+t.id);a.addClass("is-invalid").nextAll("span.invalid-feedback").text(t.message),a.closest(".box-selectpicker").find(".bs-placeholder").attr("style","border-color:#e35d6a!important"),a.closest(".box-selectpicker").addClass("is-invalid").nextAll("span.invalid-feedback").html(t.message)})),$("#BoxAdtag").find("#"+e.errors[0].id).focus()):new AlertError("Error!");break;case"success":e.data_object.inventory_id;NoticeSuccess("Ad tag has been updated successfully"),x(!0),L($("#inventoryTabs").attr("data-id"));break;default:new AlertError("Undefined")}}function R(){var e=$("#BoxAdtag").find("#renderer_video").val();if(1!==parseInt(e))$("#BoxAdtag").find("#template").closest("div.sidebar-content").addClass("d-none"),$("#BoxAdtag").find("#content_source").closest("div.sidebar-content").addClass("d-none"),$("#BoxAdtag").find(".instream-show-wrapper").addClass("d-none"),$("#BoxAdtag").find(".outstream-show-wrapper").addClass("d-none"),6===parseInt(e)?$(".renderer_instream_overlay_ad").removeClass("d-none"):$(".renderer_instream_overlay_ad").addClass("d-none");else{$("#BoxAdtag").find("#template").closest("div.sidebar-content").removeClass("d-none"),$(".renderer_instream_overlay_ad").addClass("d-none");var t=$("#ConfigVideoBox").find("#template").find(":selected").data("type");"Outstream"==t&&($("#BoxAdtag").find(".outstream-show-wrapper").removeClass("d-none"),A()),"Instream"==t&&($("#BoxAdtag").find(".instream-show-wrapper").removeClass("d-none"),j())}}function P(e){switch(e.status){case"error":new AlertError(e.message);break;case"success":NoticeSuccess(e.message),$("#ads_txt").val(e.data_object);break;default:new AlertError("Undefined")}M()}function M(){var e={did:$("#inventoryTabs").attr("data-id")};console.log(e),$.ajax({url:"/ads_txt/load",type:"POST",dataType:"JSON",data:e,beforeSend:function(e){},error:function(e,t){var a=AjaxErrorMessage(e,t);new AlertError("AJAX ERROR: "+a)},complete:function(e){console.log(e),$("#resultLoadMissingLine").html(e.responseJSON.data_object.html),$("#resultLoadMissingLine").get(0).clientHeight>600?$("#resultLoadMissingLine").css({"max-height":"500px",height:"600px","overflow-y":"auto"}):$("#resultLoadMissingLine").css({"max-height":"500px","overflow-y":"auto"}),$("#lastScanAds").html(e.responseJSON.data_object.lastScanAdsTxt)}})}function L(e){$.ajax({url:"/supply/copyAdTag",type:"GET",contentType:"application/json",data:{id:e},beforeSend:function(e){},error:function(e,t){var a=AjaxErrorMessage(e,t);new AlertError("AJAX ERROR: "+a)}}).done((function(e){$("#nav-integration").html(e),$("#nav-integration #select_text_color").on("input",(function(){$("#nav-integration").find("#text_color").val($(this).val()),$(this).closest("label").css("background",$(this).val()).css({border:"1px solid #aab4c8","border-right":0})})),$("#nav-integration #select_border_color").on("input",(function(){$("#nav-integration").find("#border_color").val($(this).val()),$(this).closest("label").css("background",$(this).val()).css({border:"1px solid #aab4c8","border-right":0})})),$("#nav-integration .form-control-color").on("input",(function(){$(this).next("input").val($(this).val())})),$("#nav-integration .form-control-color").next("input").on("input",(function(e){$(this).prev(".form-control-color").val(e.target.value)})),$("#nav-integration #place_holder").on("change",(function(){this.checked?$(".box_place_holder").removeClass("d-none"):$(".box_place_holder").addClass("d-none")})),$("#desktop_tag").on("change",(function(){D()})),$("#nav-integration .vast-type").on("change",(function(){console.log($(this).val());var e=$(this).closest(".box-vast");"vpaid"===$(this).val()?(e.find(".vast-type-vast").addClass("d-none"),e.find(".vast-type-vpaid").removeClass("d-none")):"vast"===$(this).val()&&(e.find(".vast-type-vpaid").addClass("d-none"),e.find(".vast-type-vast").removeClass("d-none"))})),D()}))}function D(){$("#mobile_tag_sticky").removeAttr("disabled"),$("#mobile_tag_sticky").find("option").removeAttr("hidden"),$("#mobile_tag_display").find("option").removeAttr("hidden");var e=$("#desktop_tag").find(":selected").data("type"),t=$("#desktop_tag").val();if(5===e)t===$("#mobile_tag_sticky").val()&&($("#mobile_tag_sticky").val("default"),$("#mobile_tag_sticky").selectpicker("refresh")),$("#mobile_tag_sticky").attr("name","mobile_tag"),$("#toolCopyTag .box-mobile-sticky").removeClass("d-none"),$("#toolCopyTag .box-mobile-display").addClass("d-none"),$("#mobile_tag_display").removeAttr("name"),$("#mobile_tag_sticky").find("option").attr("disabled",!1),$("#mobile_tag_sticky").find("option[value="+$("#desktop_tag").val()+"]").attr("disabled",!0),$("#mobile_tag_sticky").selectpicker("refresh"),$(".box_display").addClass("d-none");else if(1===e){t===$("#mobile_tag_display").val()&&($("#mobile_tag_display").val("default"),$("#mobile_tag_display").selectpicker("refresh")),$("#mobile_tag_display").attr("name","mobile_tag"),$("#toolCopyTag .box-mobile-display").removeClass("d-none"),$("#toolCopyTag .box-mobile-sticky").addClass("d-none"),$("#mobile_tag_sticky").removeAttr("name"),$("#mobile_tag_display").find("option").attr("disabled",!1),$("#mobile_tag_display").find("option[value="+$("#desktop_tag").val()+"]").attr("disabled",!0),$("#mobile_tag_display").selectpicker("refresh"),$(".box_display").removeClass("d-none")}}function q(){var e=$(".input-color");e.on("input",(function(){$(this).next("input").val($(this).val())})),e.next("input").on("input",(function(e){$(this).prev("input").val(e.target.value)}))}$(document).ready((function(){var t;a=$("#inventory_id").attr("data-inventory-id"),d+="?id="+a,$(".custom-tab").on("click",".nav-link",(function(){$(".custom-tab").find(".nav-link").removeClass("pp-4").removeClass("at-1"),$(this).addClass("pp-4"),"1"!=$(this).attr("data-tab")&&$(this).addClass("at-1")})),$("#tab-adtag").on("click",(function(){var e=$(n).serializeObject();e.tab=1,l=1,$("#btn-add-adtag").removeClass("d-none"),$("#btn-copy-adtag").removeClass("d-none"),$(".submit-config").closest(".dm6 ").addClass("d-none"),$(".submit-consent").closest(".dm6 ").addClass("d-none"),$(".history-a").addClass("d-none"),k(e)})),$("#tab-general").on("click",(function(){var e=$(n).serializeObject();e.tab=2,l=2,$("#btn-add-adtag").addClass("d-none"),$("#btn-copy-adtag").addClass("d-none"),$(".submit-config").closest(".dm6 ").removeClass("d-none"),$(".submit-consent").closest(".dm6 ").addClass("d-none"),$(".load-history").attr("data-object","inventory_config_fe").removeClass("d-none"),k(e)})),$("#tab-consent").on("click",(function(){var e=$(n).serializeObject();e.tab=3,l=3,$("#btn-add-adtag").addClass("d-none"),$("#btn-copy-adtag").addClass("d-none"),$(".submit-consent").closest(".dm6 ").removeClass("d-none"),$(".submit-config").closest(".dm6 ").addClass("d-none"),$(".load-history").attr("data-object","inventory_consent_fe").removeClass("d-none"),k(e)})),$("#tab-adstxt").on("click",(function(){var e=$(n).serializeObject();e.tab=4,l=4,$("#btn-add-adtag").addClass("d-none"),$("#btn-copy-adtag").addClass("d-none"),$(".submit-config").closest(".dm6 ").addClass("d-none"),$(".submit-consent").closest(".dm6 ").addClass("d-none"),$(".load-history").attr("data-object","inventory_adstxt_fe").removeClass("d-none"),k(e)})),$("#tab-connection").on("click",(function(){var e=$(n).serializeObject();e.tab=5,l=5,$("#btn-add-adtag").addClass("d-none"),$("#btn-copy-adtag").addClass("d-none"),$(".submit-config").closest(".dm6 ").addClass("d-none"),$(".submit-consent").closest(".dm6 ").addClass("d-none"),$(".load-history").attr("data-object","inventory_connection_fe").removeClass("d-none"),k(e)})),$("#tab-integration").on("click",(function(){var e=$(n).serializeObject();e.tab=6,l=6,$("#btn-add-adtag").addClass("d-none"),$("#btn-copy-adtag").addClass("d-none"),$(".submit-config").closest(".dm6 ").addClass("d-none"),$(".submit-consent").closest(".dm6 ").addClass("d-none"),$(".load-history").addClass("d-none"),k(e)})),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0,n=$("#"+e);$(".submit-config").on("click",(function(e){ProgressStart(),e.preventDefault();var s=$(this),i=s.text(),o="Loading...",r=n.serializeObject();r.ad_refresh_time=parseInt(r.ad_refresh_time),r.id=parseInt(r.id),r.inventory_id=parseInt(r.inventory_id),r.prebid_timeout=parseInt(r.prebid_timeout),r.gam_account=parseInt(r.gam_account),r.pb_render_mode=parseInt(r.pb_render_mode),r.fetch_margin_percent=parseInt(r.fetch_margin_percent),r.render_margin_percent=parseInt(r.render_margin_percent),r.mobile_scaling=parseInt(r.mobile_scaling),"on"===r.ad_refresh?r.ad_refresh=1:r.ad_refresh=2,"on"===r.gam_auto_create?r.gam_auto_create=1:r.gam_auto_create=2,"on"===r.safe_frame?r.safe_frame=1:r.safe_frame=2,"on"===r.direct_sales?r.direct_sales=1:r.direct_sales=2,$.ajax({url:t,type:"POST",dataType:"JSON",contentType:"application/json",data:JSON.stringify(r),beforeSend:function(e){s.addClass("disabled").attr("disabled",!0).text(o)},error:function(e,t){var a=AjaxErrorMessage(e,t);new AlertError("AJAX ERROR: "+a),s.removeClass("disabled").attr("disabled",!1).text(i)},success:function(e){s.removeClass("disabled").attr("disabled",!1).text(i)},complete:function(e){ProgressDone(),a(e.responseJSON,n)}})}))}("formGeneral","/supply/setup",y),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0,n=$("#"+e);$(".submit-consent").on("click",(function(e){ProgressStart(),e.preventDefault();var s=$(this),i=s.text(),o="Loading...";n.find("input").on("click change blur",(function(e){var t=$(this);t.hasClass("is-invalid")&&(t.removeClass("is-invalid").next(".invalid-feedback").empty(),t.removeClass("is-invalid").parent().removeClass("is-invalid").next(".invalid-feedback").empty())})),n.find("textarea").on("click change blur",(function(e){var t=$(this);t.hasClass("is-invalid")&&(t.removeClass("is-invalid").next(".invalid-feedback").empty(),t.removeClass("is-invalid").parent().removeClass("is-invalid").next(".invalid-feedback").empty())}));var r=n.serializeObject();r.id=parseInt(r.id),r.inventory_id=parseInt(r.inventory_id),"on"===r.gdpr?r.gdpr=1:r.gdpr=2,r.gdpr_timeout=parseInt(r.gdpr_timeout),"on"===r.ccpa?r.ccpa=1:r.ccpa=2,"on"===r.custom_brand?r.custom_brand=1:r.custom_brand=2,"on"===r.ad_refresh?r.ad_refresh=1:r.ad_refresh=2,"on"===r.direct_sales?r.direct_sales=1:r.direct_sales=2,r.ccpa_timeout=parseInt(r.ccpa_timeout),$.ajax({url:t,type:"POST",dataType:"JSON",contentType:"application/json",data:JSON.stringify(r),beforeSend:function(e){s.addClass("disabled").attr("disabled",!0).text(o)},error:function(e,t){var a=AjaxErrorMessage(e,t);new AlertError("AJAX ERROR: "+a),s.removeClass("disabled").attr("disabled",!1).text(i)},success:function(e){s.removeClass("disabled").attr("disabled",!1).text(i)},complete:function(e){ProgressDone(),a(e.responseJSON,n)}})}))}("formConsent","/supply/setupConsent",y),function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,s=$("#"+t);s.find(".submit").on("click",(function(t){t.preventDefault();var i=$(this),o=i.text(),r="Loading...";s.find("input").on("click change blur",(function(e){var t=$(this);t.hasClass("is-invalid")&&(t.removeClass("is-invalid").next(".invalid-feedback").empty(),t.removeClass("is-invalid").parent().removeClass("is-invalid").next(".invalid-feedback").empty())})),s.find("textarea").on("click change blur",(function(e){var t=$(this);t.hasClass("is-invalid")&&(t.removeClass("is-invalid").next(".invalid-feedback").empty(),t.removeClass("is-invalid").parent().removeClass("is-invalid").next(".invalid-feedback").empty())}));var d=s.serializeObject();d.inventory_id=parseInt(d.inventory_id),d.auction_delay=parseInt(d.auction_delay),d.sync_delay=parseInt(d.sync_delay),d.id=parseInt(d.id),d.module_params=v();var l=[],c=[];p.map((function(t){l=[].concat(e(l),[t.id])})),_.map((function(t){c=[].concat(e(c),[t.id])})),d.list_del=c.filter((function(e){return!l.includes(e)})),$.ajax({url:a,type:"POST",dataType:"JSON",contentType:"application/json",data:JSON.stringify(d),beforeSend:function(e){i.addClass("disabled").attr("disabled",!0).text(r)},error:function(e,t){var a=AjaxErrorMessage(e,t);new AlertError("AJAX ERROR: "+a),i.removeClass("disabled").attr("disabled",!1).text(o)},success:function(e){i.removeClass("disabled").attr("disabled",!1).text(o)},complete:function(e){p=[],_=[],m(),n(e.responseJSON,s)}})}))}("formUserId","/supply/setupUserId",y),$("#gdpr").is(":checked")?$(".gdpr_sub").attr("hidden",!1):$(".gdpr_sub").attr("hidden",!0),$("#ccpa").is(":checked")?$(".ccpa_sub").attr("hidden",!1):$(".ccpa_sub").attr("hidden",!0),$("#gdpr").on("change",(function(){this.checked?$("#enable_custom_gdpr").attr("hidden",!1):$("#enable_custom_gdpr").attr("hidden",!0)})),$("#ccpa").on("change",(function(){this.checked?$("#enable_custom_ccpa").attr("hidden",!1):$("#enable_custom_ccpa").attr("hidden",!0)})),$("#custom_brand").on("change",(function(){this.checked?$("#enable_custom_brand").attr("hidden",!1):$("#enable_custom_brand").attr("hidden",!0)})),$("#ad_refresh").on("change",(function(){this.checked?$("#enable_ad_refresh").attr("hidden",!1):$("#enable_ad_refresh").attr("hidden",!0)})),h(),m(),t="/supply/collapse",$("#formUserId").on("show.bs.collapse",".collapse",(function(e){var a=e.target.id;!function(e,t){var a=new URLSearchParams(window.location.search),n=Object.fromEntries(a.entries());$.ajax({url:e,type:"POST",dataType:"JSON",contentType:"application/json",data:JSON.stringify({is_collapse:2,box_collapse:t,page_type:"edit",page_id:parseInt(n.id)}),beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined")},error:function(e,t){var a=AjaxErrorMessage(e,t);new AlertError("AJAX ERROR: "+a)}}).done((function(e){}))}(t,a)})),$("#formUserId").on("hide.bs.collapse",".collapse",(function(e){var a=e.target.id;!function(e,t){var a=new URLSearchParams(window.location.search),n=Object.fromEntries(a.entries());$.ajax({url:e,type:"POST",dataType:"JSON",contentType:"application/json",data:JSON.stringify({is_collapse:1,box_collapse:t,page_type:"edit",page_id:parseInt(n.id)}),beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined")},error:function(e,t){var a=AjaxErrorMessage(e,t);new AlertError("AJAX ERROR: "+a)}}).done((function(e){}))}(t,a)})),$("#nav-integration").on("click",".build-tool",(function(){!function(e){var t=$("#toolCopyTag"),a=$(e),n=a.text(),s="Loading...",i=t.serializeObject();i.desktop_tag=parseInt(i.desktop_tag),i.mobile_tag=parseInt(i.mobile_tag),"on"===i.place_holder?i.place_holder=1:i.place_holder=2;var o="/supply/buildScript";$.ajax({url:o,type:"POST",contentType:"application/json",data:JSON.stringify(i),beforeSend:function(e){a.attr("disabled",!0).text(s)},error:function(e,t){var s=AjaxErrorMessage(e,t);new AlertError("AJAX ERROR: "+s),a.attr("disabled",!1).text(n)},success:function(e){a.attr("disabled",!1).text(n)}}).done((function(e){$("#nav-integration #script_build").text(e)}))}(this)})),$("#nav-integration").on("click",".build-playzone",(function(){!function(e){var t=$("#toolGenerateQuiz"),a=$(e),n=a.text(),s="Loading...",i=t.serializeObject();a.attr("disabled",!0).text(s);var o="";i.quiz&&(o='\n<div class="adsbyvli" data-ad-slot=\'pw_'.concat(i.playzone_tag,"'></div> \n<script type=\"text/javascript\"> \n    (vitag.Init = window.vitag.Init || []).push(function () { \n        viAPItag.initPlayZone('pw_").concat(i.playzone_tag,'\', { "quizIds": [').concat(i.quiz,"] }) \n    }) \n<\/script>")),$("#toolGenerateQuiz #code_snippet_quiz").text(o.trim()),a.attr("disabled",!1).text(n)}(this)})),$("#select-module").on("select2:select",(function(e){var t=$("#select-module").val(),a=$("#module").val();a.push(t),$("#collapseSettingBox").find("#ModuleParamBox-"+t).length||($("#module").val(a),$("#module").trigger("change"),function(e){var t=e.params.data,a=c.map((function(e){return e.id})).lastIndexOf(t.id);if(a>-1){var n=c[a].index+1;c.push({id:t.id,index:n}),b(t.id,t.text,n)}else c.push({id:t.id,index:1}),b(t.id,t.text,1)}(e)),$("#select-module").val(""),$("#select-module").trigger("change")})),$("#module").on("select2:unselect",(function(e){g(e.params.data.id)})),$(n).find(".submit").on("click",(function(e){e.preventDefault(),x(!0,!0)})),x(!1),$(s).on("click","tbody td div.btn-group a.remove",(function(e){var t=$(this).data("id");confirm('Are you sure archive!"')&&function(e){var t="/adtag/del";$.ajax({url:t,type:"POST",dataType:"JSON",contentType:"application/json",data:JSON.stringify({id:e}),beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined")},error:function(e,t){var a=AjaxErrorMessage(e,t);new AlertError("AJAX ERROR: "+a)}}).done((function(e){switch(e.status){case"success":NoticeSuccess("Ad tag has been removed successfully"),x(!0,!1);break;case"err":new AlertError(e.message)}}))}(t)})),$("#module-params").on("click",".export-dropdown a.remove_module_param",(function(){var e=$(this).data("id");g(e),function(e){var t=$("#module").val(),a=t.indexOf(e);-1!==a&&t.splice(a,1);$("#module").val(t).trigger("change")}(e.toString())})),$('[data-bs-toggle="popover"]').popover({html:!0,sanitize:!1}),$("#module-params").on("click","div.bidder-box .d a.rm_c",(function(){!function(e){$("#ModuleParamBox-"+e).remove();var t=[];$("#module-params").find(".module_param_box").each((function(){t.push($(this).attr("data-id"))})),$("#module").val(t),$("#module").trigger("change")}($(this).attr("data-id"))})),$("input").change((function(){$(this).removeClass("border-danger"),$(this).next("span.invalid-feedback").text("")})),f(),$("#load_ad_type").on("change",(function(){f()})),$(r).find(".submit").on("click",(function(e){e.preventDefault()})),$(".connection").change((function(e){!function(e){ProgressStart();var t=$(e).attr("data-bidder-id"),a=$(e).attr("data-inventory-id"),n=0;n=e.checked?1:2,$.ajax({url:"/supply/change-status-connection",type:"POST",dataType:"JSON",data:{inventory_id:parseInt(a),bidder_id:parseInt(t),status:n},beforeSend:function(t){$(e).addClass("disabled")},complete:function(e){},error:function(e,t){new AlertError("AJAX ERROR: "+ajaxErrorMessage(e,t))},success:function(t){var a;ProgressDone(),"error"===t.status?AlertError(t.message):(console.log(t),a=0,$("#nav-connection").find(".item").each((function(){$(this).find("input").is(":checked")||(a+=1)})),a?$(".numberCircle ").text(a).removeClass("d-none"):$(".numberCircle ").text(a).addClass("d-none"),NoticeSuccess("Changed!"),1==n?($(e).closest(".item").find(".status").addClass("pp23").removeClass("pp-23"),$(e).closest(".item").find(".status-text").text("Live")):($(e).closest(".item").find(".status").addClass("pp-23").removeClass("pp23"),$(e).closest(".item").find(".status-text").text("Waiting")))}})}(this)})),$("#nav-integration").on("change",".select-ad-size",(function(){var e=$(this).val();"all"===e?($(".ad-size-all").removeClass("d-none"),$(".ad-size-responsive").addClass("d-none"),$(".ad-size-fixed").addClass("d-none")):"fixed"===e?($(".ad-size-fixed").removeClass("d-none"),$(".ad-size-all").addClass("d-none"),$(".ad-size-responsive").addClass("d-none")):"responsive"===e&&($(".ad-size-responsive").removeClass("d-none"),$(".ad-size-all").addClass("d-none"),$(".ad-size-fixed").addClass("d-none"))})),document.querySelectorAll("body").forEach((function(e){e.addEventListener("click",(function(e){document.querySelector(".customize-sidebar")&&!document.querySelector(".customize-sidebar").contains(e.target)&&($("#BoxAdtag").hasClass("close-sidebar")?document.querySelector("body").classList.remove("customize-box"):document.querySelector("body").classList.add("customize-box"))}))})),$("#btn-close").on("click",(function(){$("#BoxAdtag").addClass("close-sidebar")})),$("#BoxAdtag").on("click",".btn-close-sidebar",(function(){$("#btn-close").click()}))})),$(document).ready((function(){var e,t=$("#BoxAdtag");$("#btn-add-adtag").click((function(){$("#BoxAdtag").removeClass("close-sidebar"),function(){var e=$("#btn-add-adtag").attr("data-id");if(!e)return;$("#BoxAdtag").find("h3 span.sidebar-title").text("Create New Ad Tag"),$("#BoxAdtag").find(".history-a").addClass("d-none"),$("#BoxAdtag").append(Loading()),$.ajax({type:"GET",url:"/adtag-v2/add",data:{inventoryId:e}}).done((function(e){e.error||($("#BoxAdtag").find(".result-adtag").html(e),$("#BoxAdtag").find("._blur").remove(),$("#BoxAdtag").find(".selectpicker").selectpicker("refresh"),j(),T(),O(),B(),w(),A(),q(),I(),z(),C(),u(),function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=$("#BoxAdtag").find("#"+e);n.find(".selectpicker").on("changed.bs.select",(function(e,t,a,n){$(this).closest(".box-selectpicker").find(".bs-placeholder").attr("style","border-color:#a0acc2 !important"),$(this).closest(".box-selectpicker").removeClass("is-invalid")})),n.find(".submit-adtag").on("click",(function(e){e.preventDefault();var s=$(this),i=s.text(),o="Loading...",r=n.serializeObject(),d=[];r.additional_ad_size&&r.additional_ad_size.constructor===Array?$.each(r.additional_ad_size,(function(e,t){d.push(parseInt(t))})):d.push(parseInt(r.additional_ad_size)),r.additional_ad_size=d;var l=[];r.additional_ad_size_mobile&&r.additional_ad_size_mobile.constructor===Array?$.each(r.additional_ad_size_mobile,(function(e,t){l.push(parseInt(t))})):l.push(parseInt(r.additional_ad_size_mobile)),r.additional_ad_size_mobile=l;var c=[];r.size_sticky_mobile&&r.size_sticky_mobile.constructor===Array?$.each(r.size_sticky_mobile,(function(e,t){c.push(parseInt(t))})):c.push(parseInt(r.size_sticky_mobile)),r.additional_ad_size_mobile_stick=c;var p=[];r.size_sticky&&r.size_sticky.constructor===Array?$.each(r.size_sticky,(function(e,t){p.push(parseInt(t))})):p.push(parseInt(r.size_sticky)),r.additional_ad_size_desktop_stick=p,r.ad_tag_type=parseInt(r.ad_tag_type),r.content_source_articles=parseInt(r.content_source_articles),r.content_type=parseInt(r.content_type),r.content_source=parseInt(r.content_source),r.playlist=parseInt(r.playlist),r.primary_ad_size?r.primary_ad_size=parseInt(r.primary_ad_size):r.primary_ad_size=0,r.size_on_mobile?r.size_on_mobile=parseInt(r.size_on_mobile):r.size_on_mobile=0,r.passback_type_outstream=parseInt(r.passback_type_outstream),r.inline_tag_outstream=parseInt(r.inline_tag_outstream),r.template=parseInt(r.template),r.template_articles=parseInt(r.template_articles),r.template_outstream=parseInt(r.template_outstream),r.inventory_id=parseInt(r.inventory_id),r.position_sticky=parseInt(r.position_sticky),r.position_sticky_mobile=parseInt(r.position_sticky_mobile),r.size_sticky=parseInt(r.size_sticky),r.size_sticky_mobile=parseInt(r.size_sticky_mobile),r.renderer_instream=parseInt(r.renderer_instream),r.renderer_outstream=parseInt(r.renderer_outstream),r.renderer_video=parseInt(r.renderer_video),r.total_ads=parseInt(r.total_ads),r.template_play_zone=parseInt(r.template_play_zone),r.content_source_play_zone=parseInt(r.content_source_play_zone),r.ad_size=parseInt(r.ad_size),r.responsive_type=parseInt(r.responsive_type),r.template_native=parseInt(r.template_native),r.ad_refresh_time=parseInt(r.ad_refresh_time),"on"===r.close_button_sticky?r.close_button_sticky=1:r.close_button_sticky=2,r.close_button_sticky_mobile&&("on"===r.close_button_sticky_mobile?r.close_button_sticky_mobile=1:r.close_button_sticky_mobile=2),r.bid_out_stream&&("on"===r.bid_out_stream?r.bid_out_stream=1:r.bid_out_stream=2),"on"===r.status||"ON"===r.status||"running"===r.status?r.status=1:r.status=2,"on"===r.shift_content?r.shift_content=1:r.shift_content=2,$("#enable_sticky_desktop").is(":checked")?r.enable_sticky_desktop=1:r.enable_sticky_desktop=2,$("#enable_sticky_mobile").is(":checked")?r.enable_sticky_mobile=1:r.enable_sticky_mobile=2,"on"===r.banner_ad?r.banner_ad=1:r.banner_ad=2,"on"===r.video_ad?r.video_ad=1:r.video_ad=2,1===r.ad_tag_type||5===r.ad_tag_type?"domain_configuration"===r.ad_refresh&&delete r.ad_refresh_time:(delete r.ad_refresh,delete r.ad_refresh_time),$.ajax({url:a,type:"POST",dataType:"JSON",contentType:"application/json",data:JSON.stringify(r),beforeSend:function(e){s.prop("disabled",!0).text(o)},error:function(e,t){var a=AjaxErrorMessage(e,t);new AlertError("AJAX ERROR: "+a),s.prop("disabled",!1).text(i)},success:function(e){s.prop("disabled",!1).text(i)},complete:function(e){t(e.responseJSON,n)}})}))}("AddAdTag",N,"/adtag/add"),$("#ConfigVideoBox").on("change","#template",(function(){switch($(this).find(":selected").data("type")){case"Instream":$(".instream-show-wrapper").removeClass("d-none"),$(".outstream-show-wrapper").addClass("d-none");break;case"Outstream":$(".instream-show-wrapper").addClass("d-none"),$(".outstream-show-wrapper").removeClass("d-none")}})))}))}()})),$(".tab-content").on("click",".edit-adtag",(function(){$("#BoxAdtag").removeClass("close-sidebar"),function(e){var t=e.attr("data-id"),a=e.attr("data-inventory");if(!a||!t)return;$("#BoxAdtag").append(Loading()),$("#BoxAdtag").find("h3 span.sidebar-title").text("Edit Ad Tag"),$("#BoxAdtag").find(".load-history").removeClass("d-none").attr("data-id",t),$.ajax({type:"GET",url:"/adtag-v2/edit",data:{id:t,inventoryId:a}}).done((function(e){var t,a,n;e.error||($("#BoxAdtag").find(".result-adtag").html(e),$("#BoxAdtag").find("._blur").remove(),$("#BoxAdtag").find(".selectpicker").selectpicker("refresh"),t="/adtag/collapse",a=new URLSearchParams(window.location.search),n=Object.fromEntries(a.entries()),$("#BoxAdtag").find(".collapse").on("show.bs.collapse",(function(e){var a=e.target.id;!function(e,t,a,n){$.ajax({url:e,type:"POST",dataType:"JSON",contentType:"application/json",data:JSON.stringify({is_collapse:2,box_collapse:t,page_type:n,page_id:a}),beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined")},error:function(e,t){}}).done((function(e){}))}(t,a,parseInt(n.id),"edit")})),$("#BoxAdtag").find(".collapse").on("hide.bs.collapse",(function(e){var a=e.target.id;!function(e,t,a,n){$.ajax({url:e,type:"POST",dataType:"JSON",contentType:"application/json",data:JSON.stringify({is_collapse:1,box_collapse:t,page_type:n,page_id:a}),beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined")},error:function(e,t){}}).done((function(e){}))}(t,a,parseInt(n.id),"edit")})),j(),T(),O(),B(),w(),A(),R(),q(),I(!0),z(),C(),u(),function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=$("#BoxAdtag").find("#"+e);n.find(".selectpicker").on("changed.bs.select",(function(e,t,a,n){$(this).closest(".box-selectpicker").find(".bs-placeholder").attr("style","border-color:#a0acc2 !important"),$(this).closest(".box-selectpicker").removeClass("is-invalid")})),n.find(".submit").on("click",(function(e){e.preventDefault();var s=$(this),i=s.text(),o="Loading...",r=n.serializeObject(),d=[];r.additional_ad_size&&r.additional_ad_size.constructor===Array?$.each(r.additional_ad_size,(function(e,t){d.push(parseInt(t))})):d.push(parseInt(r.additional_ad_size)),r.additional_ad_size=d;var l=[];r.additional_ad_size_mobile&&r.additional_ad_size_mobile.constructor===Array?$.each(r.additional_ad_size_mobile,(function(e,t){l.push(parseInt(t))})):l.push(parseInt(r.additional_ad_size_mobile)),r.additional_ad_size_mobile=l;var c=[];r.size_sticky_mobile&&r.size_sticky_mobile.constructor===Array?$.each(r.size_sticky_mobile,(function(e,t){c.push(parseInt(t))})):c.push(parseInt(r.size_sticky_mobile)),r.additional_ad_size_mobile_stick=c;var p=[];r.size_sticky&&r.size_sticky.constructor===Array?$.each(r.size_sticky,(function(e,t){p.push(parseInt(t))})):p.push(parseInt(r.size_sticky)),r.additional_ad_size_desktop_stick=p,r.id=parseInt(r.id),r.ad_tag_type=parseInt($("#ad_tag_type").val()),r.content_source_articles=parseInt(r.content_source_articles),r.content_type=parseInt(r.content_type),r.content_source=parseInt(r.content_source),r.playlist=parseInt(r.playlist),r.primary_ad_size?r.primary_ad_size=parseInt(r.primary_ad_size):r.primary_ad_size=0,r.size_on_mobile?r.size_on_mobile=parseInt(r.size_on_mobile):r.size_on_mobile=0,r.passback_type_outstream=parseInt(r.passback_type_outstream),r.inline_tag_outstream=parseInt(r.inline_tag_outstream),r.template=parseInt(r.template),r.template_articles=parseInt(r.template_articles),r.template_outstream=parseInt(r.template_outstream),r.inventory_id=parseInt(r.inventory_id),r.position_sticky=parseInt(r.position_sticky),r.position_sticky_mobile=parseInt(r.position_sticky_mobile),r.size_sticky=parseInt(r.size_sticky),r.size_sticky_mobile=parseInt(r.size_sticky_mobile),r.renderer_instream=parseInt(r.renderer_instream),r.renderer_outstream=parseInt(r.renderer_outstream),r.template_play_zone=parseInt(r.template_play_zone),r.content_source_play_zone=parseInt(r.content_source_play_zone),r.total_ads=parseInt(r.total_ads),r.ad_size=parseInt(r.ad_size),r.responsive_type=parseInt(r.responsive_type),r.template_native=parseInt(r.template_native),r.ad_refresh_time=parseInt(r.ad_refresh_time),"on"===r.close_button_sticky?r.close_button_sticky=1:r.close_button_sticky=2,r.close_button_sticky_mobile&&("on"===r.close_button_sticky_mobile?r.close_button_sticky_mobile=1:r.close_button_sticky_mobile=2),r.bid_out_stream&&("on"===r.bid_out_stream?r.bid_out_stream=1:r.bid_out_stream=2),"on"===r.status||"ON"===r.status||"running"===r.status?r.status=1:r.status=2,"on"===r.shift_content?r.shift_content=1:r.shift_content=2,$("#enable_sticky_desktop").is(":checked")?r.enable_sticky_desktop=1:r.enable_sticky_desktop=2,$("#enable_sticky_mobile").is(":checked")?r.enable_sticky_mobile=1:r.enable_sticky_mobile=2,"on"===r.banner_ad?r.banner_ad=1:r.banner_ad=2,"on"===r.video_ad?r.video_ad=1:r.video_ad=2,1===r.ad_tag_type||5===r.ad_tag_type?"domain_configuration"===r.ad_refresh&&delete r.ad_refresh_time:(delete r.ad_refresh,delete r.ad_refresh_time),$.ajax({url:a,type:"POST",dataType:"JSON",contentType:"application/json",data:JSON.stringify(r),beforeSend:function(e){s.prop("disabled",!0).text(o)},error:function(e,t){var a=AjaxErrorMessage(e,t);new AlertError("AJAX ERROR: "+a),s.prop("disabled",!1).text(i)},success:function(e){s.prop("disabled",!1).text(i)},complete:function(e){t(e.responseJSON,n)}})}))}("EditAdTag",J,"/adtag/edit"))}))}($(this))})),t.on("change","#ad_tag_type",(function(){var e=$(this).val();if(t.find(".box-config").attr("hidden",!0),t.find('*[data-adtype="'+e+'"]').attr("hidden",!1),t.find("span.select2-container--bootstrap").css("width","100%"),"5"===e)t.find(".box_shift_content").removeClass("d-none"),t.find(".ad_refresh").removeClass("d-none");else t.find(".box_shift_content").addClass("d-none"),t.find(".ad_refresh").addClass("d-none")})),$("#BoxAdtag").on("click",".toggle-collapse",(function(){$(this).find('a[data-bs-toggle="collapse"]')[0].click()})),$("#BoxAdtag").on("change","#passback_type_outstream",(function(){A()})),$("#BoxAdtag").on("change","#content_source",(function(){j()})),$("#BoxAdtag").on("change","#content_source_articles",(function(){j()})),$("#BoxAdtag").on("change","#renderer_video",(function(){R()})),$("#BoxAdtag").on("click","#btn-close",(function(){$("body").removeClass("customize-box")})),$("body").on("click",".customize-btn",(function(){$("body").addClass("customize-box")})),(e=$("#BoxAdtag")).on("change","input",(function(e){var t=$(this);t.hasClass("is-invalid")&&t.removeClass("is-invalid").next(".invalid-feedback").empty()})),e.on("change","textarea",(function(e){var t=$(this);t.hasClass("is-invalid")&&t.removeClass("is-invalid").next(".invalid-feedback").empty()})),e.on("change","select",(function(e){var t=$(this);t.hasClass("is-invalid")&&t.removeClass("is-invalid").next(".invalid-feedback").empty()})),e.on("change","select2",(function(e){var t=$(this);t.parent().next("span.invalid-feedback").empty(),t.parent().find(".select2-container--bootstrap .select2-selection--single").css("border-color","#ebedf2")})),e.on("change",".selectpicker",(function(e){var t=$(this);t.closest(".is-invalid").next("span.invalid-feedback").empty(),t.parent().find(".dropdown-toggle").css("border-color","#ebedf2")}))})),$(document).ready((function(){a=$("#inventory_id").attr("data-inventory-id"),$("#resultLoadMissingLine").on("click",".copy-line",(function(){!function(e){var t="",a=".ads-line";"entire"!==e&&(a=".ads-line-missing");$(a).each((function(e){var a=$(this).text();a&&(t+=a+"\n")})),CopyTextToClipboard(t);var n=$("#CopyAdsTxt"),s=n.html();n.attr("disabled",!0).text("Copied!"),setTimeout((function(){n.attr("disabled",!1).html(s)}),1e3)}($(this).data("type"))})),SubmitForm("scanAds",(function(e){M(),"success"===e.status?NoticeSuccess(e.message):new NoticeError(e.message)}),"/ads_txt/scan"),SubmitForm("SaveAdsTxt",P,"/ads_txt/detail?did="+a)})),$(document).ready((function(){L($("#inventoryTabs").attr("data-id")),$("#nav-integration").on("change",".js-load-type",(function(){var e=$(this).val();e&&("asynchronous"==e?($("#nav-integration").find(".js-type-asynchronous").removeClass("d-none").css("opacity","0").animate({opacity:"1"}),$("#nav-integration").find(".js-type-normal").addClass("d-none")):"normal"==e&&($("#nav-integration").find(".js-type-asynchronous").addClass("d-none"),$("#nav-integration").find(".js-type-normal").removeClass("d-none").css("opacity","0").animate({opacity:"1"})))})),$("#nav-integration").on("click",".copy-adtag",(function(e){var t,a;t=$(this),a=t.attr("data-id"),t.closest("tr").find("#pw_"+a).select(),document.execCommand("copy"),t.text("Copies"),setTimeout((function(){t.html('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="ds-icon-dashboard-copy">\n                                <path d="M19.75 8.69h-2.37V6.31a2 2 0 0 0-2-2H4.25a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h2.37v2.38a2 2 0 0 0 2 2h11.13a2 2 0 0 0 2-2v-7a2 2 0 0 0-2-2zm-15.5 4.62v-7h11.13v2.38H8.62a2 2 0 0 0-2 2v2.62zm15.5 4.38H8.62v-7h11.13z">\n                                </path>\n                            </svg>')}),1500)})),$(".customize-sidebar").on("click",".load-history",(function(){$("body").removeClass("customize-box")}))}))})();