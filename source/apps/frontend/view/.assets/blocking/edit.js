(()=>{function e(e,t){t.append('<div class="d-flex flex-row align-items-center p-2 border-bottom target-item item_selected">\n        <div class="col p-0" style="width: 97%">\n            <span class="m-0" style="overflow-wrap: break-word;font-size: 14px">'.concat(e,'</span>\n        </div>\n        <div class="col-auto px-0">\n            <button type="button" data-name="').concat(e,'" style="width: 16px; height: 16px"\n                    class="btn d-flex align-items-center btn-outline-danger btn-icon rounded-circle p-0 btn-remove">\n                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" class="bi bi-dash-lg"\n                     viewBox="0 0 16 16">\n                    <path d="M0 8a1 1 0 0 1 1-1h14a1 1 0 1 1 0 2H1a1 1 0 0 1-1-1z"></path>\n                </svg>\n            </button>\n        </div>\n    </div>'))}function t(){var t,i=$(".textarea-add-custom").val();if(!i.trim())return!0;var a="";-1!==i.trim().indexOf("\n")?(t=i.trim().split("\n"),a="\n"):(t=i.trim().split(","),a=",");var n="",r=!0,s=0,o="",d=function(e){var t;return $.ajax({url:"/blocking/validateDomain",type:"POST",dataType:"JSON",async:!1,contentType:"application/json",data:JSON.stringify({listDomain:e}),beforeSend:function(e){},error:function(e,t){var i=AjaxErrorMessage(e,t);new AlertError("AJAX ERROR: "+i)}}).done((function(e){t=e})),t}(t);return d.listValid&&d.listValid.forEach((function(t){if(""!==(t=t.replace(/\s+/g,""))){var i=!0;$(".box-list-domain").find(".item_selected").length&&$(".box-list-domain").find(".item_selected").each((function(){t.trim()===$(this).find(".btn-remove").attr("data-name").trim()&&(i=!1)})),i&&e(t,$(".box-list-domain"))}})),d.listError&&(r=!1,d.listError.forEach((function(e){""!==(e=e.replace(/\s+/g,""))&&(0===s?(n=e,o=e):s<5?(n+=", "+e,o+=a+e):o+=a+e,s++,r=!1)}))),r||(s>5&&(n+=",... "),$(".textarea-add-custom").addClass("is-invalid").nextAll("span.invalid-feedback").text(n+" aren't valid, please check again!")),$(".textarea-add-custom").val(o),r}function i(){var t,i=$(".textarea-add-creative").val();if(!i.trim())return!0;var a="";-1!==i.trim().indexOf("\n")?(t=i.trim().split("\n"),a="\n"):(t=i.trim().split(","),a=",");var n="",r=!0,s=0,o="",d=[];return t.forEach((function(t){if(""!==(t=t.replace(/\s+/g,""))){var i=!0;$(".box-list-creative").find(".item_selected").length&&$(".box-list-creative").find(".item_selected").each((function(){t.trim()===$(this).find(".btn-remove").attr("data-name").trim()&&(i=!1)})),i&&e(t.trim(),$(".box-list-creative"))}})),d.length>0&&(r=!1,d.forEach((function(e){""!==(e=e.replace(/\s+/g,""))&&(0===s?(n=e,o=e):s<5?(n+=", "+e,o+=a+e):o+=a+e,s++,r=!1)}))),r||(s>5&&(n+=",... "),$(".textarea-add-creative").addClass("is-invalid").nextAll("span.invalid-feedback").text(n)),$(".textarea-add-creative").val(o),r}function a(e,t){switch(e.status){case"error":1===e.errors.length&&""===e.errors[0].id?new AlertError(e.errors[0].message):e.errors.length>0?($.each(e.errors,(function(e,t){$("#"+t.id).addClass("is-invalid").nextAll("span.invalid-feedback").text(t.message)})),$("#"+e.errors[0].id).focus(),$("#"+e.errors[0].id).prev("label").focus()):new AlertError("Error!");break;case"success":NoticeSuccess("Blocking has been updated successfully");break;default:new AlertError("Undefined")}}$(document).ready((function(){$(".blocking-tab .nav-tabs-blocking").on("click",".nav-link",(function(){$(".blocking-tab .nav-tabs-blocking").find(".nav-link").removeClass("pp-4"),$(this).addClass("pp-4"),"1"!=$(this).attr("data-tab")?$(this).addClass("at-1"):$(".blocking-tab .nav-tabs-blocking").find(".at-1").removeClass("at-1")})),$("#submitBlocking").find("textarea").on("input",(function(e){var t=$(this);t.hasClass("is-invalid")&&t.removeClass("is-invalid").next(".invalid-feedback").empty()})),$(".box-list-domain").on("click",".btn-remove",(function(e){$(this).closest(".target-item").remove()})),$(".box-list-creative").on("click",".btn-remove",(function(e){$(this).closest(".target-item").remove()})),$(".textarea-add-custom").on("keypress",(function(e){13===e.which&&t()})),$(".textarea-add-creative").on("keypress",(function(e){13===e.which&&i()})),function(e,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=$("#"+e);r.find("input").on("input",(function(e){var t=$(this);t.hasClass("is-invalid")&&t.removeClass("is-invalid").next(".invalid-feedback").empty()})),r.find("textarea").on("input",(function(e){var t=$(this);t.hasClass("is-invalid")&&t.removeClass("is-invalid").next(".invalid-feedback").empty(),t.hasClass("textarea-add-custom")?($(".notify-domain-err").addClass("invalid-feedback"),$(".domain-err").empty()):($(".notify-creative-err").addClass("invalid-feedback"),$(".creative-err").empty())})),r.find(".submit").on("click",(function(e){e.preventDefault();var s=t();if(!1===s)return AlertError("Please check the restriction list again!"),void $(".textarea-add-custom").focus();if(!1===(s=i()))return AlertError("Please check the creative list again!"),void $(".textarea-add-creative").focus();var o=$(this),d=o.text(),c="Loading...",l=r.serializeObject(),v=[];l.inventories&&l.inventories.constructor===Array?$.each(l.inventories,(function(e,t){v.push(parseInt(t))})):v.push(parseInt(l.inventories)),l.inventories=v;var f=[];$(".box-list-domain").find(".item_selected").length&&$(".box-list-domain").find(".item_selected").each((function(){f.push($(this).find(".btn-remove").attr("data-name").trim())})),l.advertise_domains=f;var u=[];$(".box-list-creative").find(".item_selected").length&&$(".box-list-creative").find(".item_selected").each((function(){u.push($(this).find(".btn-remove").attr("data-name").trim())})),l.creative_ids=u,l.id=parseInt(l.id),$.ajax({url:n,type:"POST",dataType:"JSON",contentType:"application/json",data:JSON.stringify(l),beforeSend:function(e){o.attr("disabled",!0).text(c)},error:function(e,t){var i=AjaxErrorMessage(e,t);new AlertError("AJAX ERROR: "+i),o.attr("disabled",!1).text(d)},success:function(e){o.attr("disabled",!1).text(d)},complete:function(e){a(e.responseJSON,r)}})}))}("submitBlocking",a)}))})();