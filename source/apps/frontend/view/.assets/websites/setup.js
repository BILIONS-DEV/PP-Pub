(()=>{function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,a){if(e){if("string"==typeof e)return t(e,a);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,a):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var a,n="#formFilterAdTag",s="#tableAdTags",i=!0,o="#formFilterConnection",d="/websites/setup",r=1,c=[],l=[],p=[];function _(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"individual_tag_configuration"===$("#BoxAdtag").find("#ad_refresh").val()?($("#BoxAdtag").find(".individual_tag_configuration").removeClass("d-none"),e.autoChange&&$("#BoxAdtag").find("#ad_refresh_time").val(30)):$("#BoxAdtag").find(".individual_tag_configuration").addClass("d-none")}e(),$("#BoxAdtag").find("#ad_refresh").on("change",(function(){e({autoChange:!0})}))}function u(){"lazyload"===$("#load_ad_type").val()?($(".load_ad_type_lazyload").removeClass("d-none"),$("#formGeneral").find("#ad_refresh_type option").prop("disabled",!0),$("#formGeneral").find("#ad_refresh_type").find('option[value="signal reload"]').prop("disabled",!1).prop("selected",!0),$("#formGeneral").find("#ad_refresh_type").selectpicker("refresh")):($(".load_ad_type_lazyload").addClass("d-none"),$("#formGeneral").find("#ad_refresh_type option").prop("disabled",!1),$("#formGeneral").find("#ad_refresh_type").selectpicker("refresh"))}function f(){$("#module-params > div.module_param_box").each((function(){$("input",this).each((function(){var t,a={},n=$(this).attr("data-type"),s=$(this).attr("data-name");switch(t=$(this).attr("data-option"),n){case"string":case"boolean":a.type=n,a.name=s,a.template=this.value;break;case"int":a.type=n,a.name=s,""!==this.value?(a.template=parseInt(this.value),a.template||(a.template=0)):a.template=0;break;case"float":a.type=n,a.name=s,""!==this.value?(a.template=parseFloat(this.value),a.template||(a.template=0)):a.template=0;break;case"json":a.type=n,a.name=s;try{a.template=JSON.parse(this.value)}catch(e){a.template=this.value}}var i={storage:[],params:[]},o=parseInt($(this).attr("data-id")),d=p.map((function(e){return e.id})).indexOf(o);if(-1===d){switch(i.id=o,i.name=$(this).attr("data-module-name"),t){case"storage":i.storage=[a].concat(e(i.storage));break;case"params":i.params=[a].concat(e(i.params))}p.push(i)}else switch(t){case"storage":p[d].storage.push(a);break;case"params":p[d].params.push(a)}}))})),p=Object.values(p)}function m(e,t,a){$.ajax({url:"/websites/loadParam",type:"GET",data:{id:e,name:t,index:a},success:function(e){$("#module-params").prepend(e.data),$("[data-toggle='toggle']").bootstrapToggle("destroy"),$("[data-toggle='toggle']").bootstrapToggle(),g(),$("[data-bs-toggle=popover]").popover()},error:function(e){console.log(e)}})}function b(e){c=c.filter((function(t){return!(t.id===e.toString())})),document.querySelectorAll("#ModuleParamBox-".concat(e)).forEach((function(e){e.remove()}))}function g(){$(".enable_testing").on("change",(function(){var e=$(this).data("module-name");this.checked?$("div#ab_testing_".concat(e)).attr("hidden",!1):$("div#ab_testing_".concat(e)).attr("hidden",!0)}))}function v(e,t){switch(e.status){case"error":1===e.errors.length&&""===e.errors[0].id?new AlertError(e.errors[0].message):e.errors.length>0?($.each(e.errors,(function(e,t){var a=$("#"+t.id);t.id,a.addClass("is-invalid").parent().addClass("is-invalid").nextAll("span.invalid-feedback").text(t.message),a.addClass("is-invalid").nextAll("span.invalid-feedback").text(t.message)})),$("#"+e.errors[0].id).focus()):new AlertError("Error!");break;case"success":new NoticeSuccess("Setup inventory has been successfully");break;default:new AlertError("Undefined")}}function h(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=$(n),d=o.find(".submit"),c=d.text(),l=o.serializeObject(),p=$("#inventory_id").data("inventory-id"),_={processing:!0,serverSide:!0,searching:!1,destroy:!0,pagingType:"simple",order:[parseInt(l.order_column),l.order_dir],language:{info:"_START_ - _END_ of _TOTAL_",infoEmpty:"0 - 0 of 0",lengthMenu:"Rows per page:  _MENU_",paginate:{next:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16"> <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/> </svg>',previous:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16"> <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/> </svg>'}},dom:'<"row"<"col-sm-12"tr>><"bottom d-flex p-3 border-top border-gray-200"<"row ms-auto align-items-center px-3"<"col-auto"fl><"col-auto"i><"col-auto"p>>>',ajax:{url:"/websites/adtag",type:"POST",contentType:"application/json; charset=utf-8",data:function(e){return t&&(l=o.serializeObject(),e.length=parseInt(l.length),e.start=parseInt(l.start),e.order[0].column=parseInt(l.order_column),e.order[0].dir=l.order_dir),a&&(e.start=0,e.order[0].column=0,e.order[0].dir="desc"),o.find("[name='length']").val(e.length),o.find("[name='start']").val(e.start),o.find("[name='order_column']").val(e.order[0].column),o.find("[name='order_dir']").val(e.order[0].dir),l.length=e.length,l.start=e.start,l.inventory_id=parseInt(p),e.postData=l,JSON.stringify(e)},beforeSend:function(e){t&&d.attr("disabled",!0).text("Loading...")},dataSrc:function(e){return t&&d.attr("disabled",!1).text(c),t=!1,l=o.serializeObject(),i?i=!1:(l.tab=r,y(l)),null===e.data?[]:e.data},error:function(e,a){var n=AjaxErrorMessage(e,a);new AlertError(n),t&&d.attr("disabled",!1).text(c)}},columns:[{data:"id",name:"ID"},{data:"name",name:"Name"},{data:"status",name:"Status"},{data:"type",name:"Type"},{data:"size",name:"Size"}],drawCallback:function(){$(".dataTables_paginate > ul.pagination > li > a.page-link").addClass("text-secondary"),$(".dataTables_paginate > ul.pagination > li.active > a").addClass("bg-warning border-warning").css("color","#111111"),$(".dataTables_length > label > select").removeClass().addClass("form-select form-select-sm"),t||$(".table-responsive").css("height","");[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map((function(e){return new bootstrap.Tooltip(e)}))}};e=parseFloat(l.length),jQuery.inArray(e,[10,25,50,100])>=0&&(_.pageLength=e),_.displayStart=parseFloat(l.start),$(s).DataTable(_)}function y(e){var t=jQuery.param(e).replaceAll("%5B%5D",""),a=d+"&"+t;window.history.pushState("object or string","Title",a),window.history.replaceState("object or string","Title",a)}function x(){var e=parseInt($("#BoxAdtag").find("#passback_type_outstream").val());1==e?($("#BoxAdtag #inline_tag_outstream").closest(".collapsePassbackType").removeClass("d-none"),$("#BoxAdtag #pass_back_outstream").closest(".collapsePassbackType").addClass("d-none")):2==e?($("#BoxAdtag #inline_tag_outstream").closest(".collapsePassbackType").addClass("d-none"),$("#BoxAdtag #inline_tag_outstream").selectpicker("refresh"),$("#BoxAdtag #pass_back_outstream").closest(".collapsePassbackType").removeClass("d-none")):($("#BoxAdtag #inline_tag_outstream").closest(".collapsePassbackType").addClass("d-none"),$("#BoxAdtag #inline_tag_outstream").selectpicker("refresh"),$("#BoxAdtag #pass_back_outstream").closest(".collapsePassbackType").addClass("d-none"))}function k(){$(".slide").on("click",(function(){$(".slide").removeClass("selected"),$(this).addClass("selected");var e=$(this).data("value");$(this).prevAll("#template_play_zone").attr("value",e)}))}function A(){function e(){"1"===$("#content_type").val()?($("#ConfigPlayZoneBox").find(".content_type_quiz").addClass("d-none"),$("#ConfigPlayZoneBox").find(".content_type_related").removeClass("d-none"),$("#slider-container").find(".content_type_related").first().click()):"2"===$("#content_type").val()&&($("#ConfigPlayZoneBox").find(".content_type_related").addClass("d-none"),$("#ConfigPlayZoneBox").find(".content_type_quiz").removeClass("d-none"),$("#slider-container").find(".content_type_quiz").first().click())}e(),$("#content_type").on("change",(function(){e()}))}function C(){function e(){$("#BoxAdtag").find("#enable_sticky_desktop").is(":checked")?($("#BoxAdtag").find(".sticky_desktop").prop("disabled",!1),""===$("#BoxAdtag").find("#size_sticky").val()&&$("#BoxAdtag").find("#additional_ad_size_desktop_stick").prop("disabled",!0),$("#BoxAdtag").find("#enable_sticky_mobile").prop("disabled",!1)):($("#BoxAdtag").find(".sticky_desktop").prop("disabled",!0),$("#BoxAdtag").find("#enable_sticky_mobile").prop("disabled",!0)),$(".selectpicker").selectpicker("refresh")}function t(){$("#BoxAdtag").find("#enable_sticky_mobile").is(":checked")?($("#BoxAdtag").find(".sticky_mobile").prop("disabled",!1),""===$("#BoxAdtag").find("#size_sticky_mobile").val()&&$("#BoxAdtag").find("#additional_ad_size_mobile_stick").prop("disabled",!0),$("#BoxAdtag").find("#enable_sticky_desktop").prop("disabled",!1)):($("#BoxAdtag").find(".sticky_mobile").prop("disabled",!0),$("#BoxAdtag").find("#enable_sticky_desktop").prop("disabled",!0)),$(".selectpicker").selectpicker("refresh")}e(),t(),$("#BoxAdtag").find("#enable_sticky_desktop").on("change",(function(){e()})),$("#BoxAdtag").find("#enable_sticky_mobile").on("change",(function(){t()}))}function z(){$("#BoxAdtag").on("change","#position_sticky",(function(){switch($(this).val()){case"1":case"6":$("#BoxAdtag").find("#size_sticky").empty().append(I(2)).append(I(10)).selectpicker("refresh");break;case"2":case"3":$("#BoxAdtag").find("#size_sticky").empty().append(I(1)).append(I(3)).append(I(4)).selectpicker("refresh")}})),$("#BoxAdtag").on("change","#position_sticky_mobile",(function(){switch($(this).val()){case"4":case"5":$("#BoxAdtag").find("#size_sticky_mobile").empty().append(I(7)).append(I(9)).append(I(19)).append(I(20)).selectpicker("refresh")}}))}function B(){"1"===$("#BoxAdtag #ad_size").val()?($("#BoxAdtag .ad_size_responsive").addClass("d-none"),$("#BoxAdtag .ad_size_fixed").removeClass("d-none")):"2"===$("#BoxAdtag #ad_size").val()&&($("#BoxAdtag .ad_size_fixed").addClass("d-none"),$("#BoxAdtag .ad_size_responsive").removeClass("d-none")),$("#BoxAdtag").on("change","#ad_size",(function(){"1"===$(this).val()?($(".ad_size_responsive").addClass("d-none"),$(".ad_size_fixed").removeClass("d-none")):"2"===$(this).val()&&($(".ad_size_fixed").addClass("d-none"),$(".ad_size_responsive").removeClass("d-none"))}))}function I(e){var t,a;switch(e){case 1:t=1,a="300x250";break;case 2:t=2,a="728x90";break;case 3:t=3,a="160x600";break;case 4:t=4,a="300x600";break;case 7:t=7,a="320x50";break;case 9:t=9,a="320x100";break;case 10:t=10,a="970x90";break;case 19:t=19,a="300x100";break;case 20:t=20,a="300x50"}return'<option selected value="'.concat(t,'">').concat(a,"</option>")}function S(){$("#BoxAdtag").find("#bid_out_stream").is(":checked")?$("#BoxAdtag").find("#bid_out_stream").bootstrapToggle("on"):$("#BoxAdtag").find("#bid_out_stream").bootstrapToggle("off"),$("#BoxAdtag").find("#primary_ad_size").on("change",(function(e){var t=$(this).find("option:selected").text();if($.inArray(t.trim(),["300x250","336x280","300x600","970x250"])>-1?($("#BoxAdtag").find(".box_bid_out_stream").removeClass("d-none"),$("#BoxAdtag").find("#bid_out_stream").bootstrapToggle("on")):($("#BoxAdtag").find(".box_bid_out_stream").addClass("d-none"),$("#BoxAdtag").find("#bid_out_stream").bootstrapToggle("off")),t){var a=t.split("x");parseInt(a[0])>320?$("#BoxAdtag").find(".mobile-config").attr("hidden",!1):($("#BoxAdtag").find(".mobile-config").attr("hidden",!0),$("#BoxAdtag").find("#size_on_mobile").selectpicker("val",""),$("#BoxAdtag").find("#additional_ad_size_mobile").selectpicker("val",""),$("#BoxAdtag").find("#pass_back_mobile").val(""))}}))}function w(){$("#BoxAdtag").find("#primary_ad_size").on("change",(function(e){var t=$("#BoxAdtag").find("#primary_ad_size").val();$("#BoxAdtag").find("#additional_ad_size").selectpicker("refresh"),O(parseInt(t),"#additional_ad_size")})),$("#BoxAdtag").find("#size_on_mobile").on("change",(function(e){var t=$("#BoxAdtag").find("#size_on_mobile").val();$("#BoxAdtag").find("#additional_ad_size_mobile").selectpicker("refresh"),O(parseInt(t),"#additional_ad_size_mobile")}))}function T(){switch($("#BoxAdtag").find(".content_source_sub").attr("hidden",!0),$("#BoxAdtag").find("#content_source").val()){case"1":$("#BoxAdtag").find("div.content_source_sub[data-content_source='1']").attr("hidden",!1);break;case"2":$("#BoxAdtag").find("div.content_source_sub[data-content_source='2']").attr("hidden",!1)}$("#BoxAdtag").find(".content_source_articles_sub").attr("hidden",!0);var e=$("#BoxAdtag").find("#content_source_articles").val();e&&$("#BoxAdtag").find("div.content_source_articles_sub[data-content_source_articles="+e+"]").attr("hidden",!1)}function O(e,t,a){e&&$.ajax({url:"/adtag/getSizeAdditional",type:"GET",data:{id:e,type:a},success:function(e){$("#BoxAdtag").find(t).html("").prop("disabled",!1),$.each(e,(function(e,a){var n=new Option(a.name,a.id,!1,!1);$("#BoxAdtag").find(t).append(n).selectpicker("refresh")}))},error:function(e){console.log(e)}})}function j(e,t){switch(e.status){case"error":1===e.errors.length&&""===e.errors[0].id?new AlertError(e.errors[0].message):e.errors.length>0?($.each(e.errors,(function(e,t){var a=$("#BoxAdtag").find("#"+t.id);a.addClass("is-invalid").nextAll("span.invalid-feedback").text(t.message),a.closest(".box-selectpicker").find(".bs-placeholder").attr("style","border-color:#e35d6a!important"),a.closest(".box-selectpicker").addClass("is-invalid").nextAll("span.invalid-feedback").html(t.message)})),$("#BoxAdtag").find("#"+e.errors[0].id).focus()):new AlertError("Error!");break;case"success":e.data_object.inventory_id;NoticeSuccess("Ad tag has been created successfully"),h(!1,!0),$("#BoxAdtag").find("[data-bs-dismiss=modal]").click(),$("#BoxAdtag").addClass("close-sidebar"),P($("#inventoryTabs").attr("data-id")),setTimeout((function(){$("body").removeClass("customize-box")}),400);break;default:new AlertError("Undefined")}}function E(e,t){switch(e.status){case"error":1===e.errors.length&&""===e.errors[0].id?new AlertError(e.errors[0].message):e.errors.length>0?($.each(e.errors,(function(e,t){var a=$("#BoxAdtag").find("#"+t.id);a.addClass("is-invalid").nextAll("span.invalid-feedback").text(t.message),a.closest(".box-selectpicker").find(".bs-placeholder").attr("style","border-color:#e35d6a!important"),a.closest(".box-selectpicker").addClass("is-invalid").nextAll("span.invalid-feedback").html(t.message)})),$("#BoxAdtag").find("#"+e.errors[0].id).focus()):new AlertError("Error!");break;case"success":e.data_object.inventory_id;NoticeSuccess("Ad tag has been updated successfully"),h(!0),P($("#inventoryTabs").attr("data-id"));break;default:new AlertError("Undefined")}}function N(){var e=$("#BoxAdtag").find("#renderer_instream").val();if(1!==parseInt(e))$("#BoxAdtag").find("#template").closest("div.sidebar-content").addClass("d-none"),$("#BoxAdtag").find("#content_source").closest("div.sidebar-content").addClass("d-none"),$("#BoxAdtag").find("#output").closest("div.sidebar-content").removeClass("d-none"),$("#BoxAdtag").find(".content_source_sub").addClass("d-none"),$("#BoxAdtag").find("#passback_type_outstream").closest("div.sidebar-content").addClass("d-none"),$("#BoxAdtag").find("#inline_tag_outstream").closest("div.sidebar-content").addClass("d-none"),$("#BoxAdtag").find("#pass_back_outstream").closest("div.sidebar-content").addClass("d-none"),6===parseInt(e)?$(".renderer_instream_overlay_ad").removeClass("d-none"):$(".renderer_instream_overlay_ad").addClass("d-none");else{D(),$("#BoxAdtag").find("#output").closest("div.sidebar-content").addClass("d-none"),$("#BoxAdtag").find("#template").closest("div.sidebar-content").removeClass("d-none"),$(".renderer_instream_overlay_ad").addClass("d-none");var t=$("#ConfigVideoBox").find("#template").find(":selected").data("type");"Outstream"==t&&x(),"Instream"==t&&($("#BoxAdtag").find("#playlist").closest("div.sidebar-content").removeClass("d-none"),T())}}function J(e){switch(e.status){case"error":new AlertError(e.message);break;case"success":NoticeSuccess(e.message),$("#ads_txt").val(e.data_object);break;default:new AlertError("Undefined")}R()}function R(){var e={did:$("#inventoryTabs").attr("data-id")};console.log(e),$.ajax({url:"/ads_txt/load",type:"POST",dataType:"JSON",data:e,beforeSend:function(e){},error:function(e,t){var a=AjaxErrorMessage(e,t);new AlertError("AJAX ERROR: "+a)},complete:function(e){console.log(e),$("#resultLoadMissingLine").html(e.responseJSON.data_object.html),$("#resultLoadMissingLine").get(0).clientHeight>600?$("#resultLoadMissingLine").css({"max-height":"500px",height:"600px","overflow-y":"auto"}):$("#resultLoadMissingLine").css({"max-height":"500px","overflow-y":"auto"}),$("#lastScanAds").html(e.responseJSON.data_object.lastScanAdsTxt)}})}function P(e){$.ajax({url:"/websites/copyAdTag",type:"GET",contentType:"application/json",data:{id:e},beforeSend:function(e){},error:function(e,t){var a=AjaxErrorMessage(e,t);new AlertError("AJAX ERROR: "+a)}}).done((function(e){$("#nav-integration").html(e),$("#nav-integration #select_text_color").on("input",(function(){$("#nav-integration").find("#text_color").val($(this).val()),$(this).closest("label").css("background",$(this).val()).css({border:"1px solid #aab4c8","border-right":0})})),$("#nav-integration #select_border_color").on("input",(function(){$("#nav-integration").find("#border_color").val($(this).val()),$(this).closest("label").css("background",$(this).val()).css({border:"1px solid #aab4c8","border-right":0})})),$("#nav-integration .form-control-color").on("input",(function(){$(this).next("input").val($(this).val())})),$("#nav-integration .form-control-color").next("input").on("input",(function(e){$(this).prev(".form-control-color").val(e.target.value)})),$("#nav-integration #place_holder").on("change",(function(){this.checked?$(".box_place_holder").removeClass("d-none"):$(".box_place_holder").addClass("d-none")})),$("#desktop_tag").on("change",(function(){M()})),$("#nav-integration .vast-type").on("change",(function(){console.log($(this).val());var e=$(this).closest(".box-vast");"vpaid"===$(this).val()?(e.find(".vast-type-vast").addClass("d-none"),e.find(".vast-type-vpaid").removeClass("d-none")):"vast"===$(this).val()&&(e.find(".vast-type-vpaid").addClass("d-none"),e.find(".vast-type-vast").removeClass("d-none"))})),M()}))}function M(){$("#mobile_tag_sticky").removeAttr("disabled"),$("#mobile_tag_sticky").find("option").removeAttr("hidden"),$("#mobile_tag_display").find("option").removeAttr("hidden");var e=$("#desktop_tag").find(":selected").data("type"),t=$("#desktop_tag").val();if(5===e)t===$("#mobile_tag_sticky").val()&&($("#mobile_tag_sticky").val("default"),$("#mobile_tag_sticky").selectpicker("refresh")),$("#mobile_tag_sticky").attr("name","mobile_tag"),$("#toolCopyTag .box-mobile-sticky").removeClass("d-none"),$("#toolCopyTag .box-mobile-display").addClass("d-none"),$("#mobile_tag_display").removeAttr("name"),$("#mobile_tag_sticky").find("option").attr("disabled",!1),$("#mobile_tag_sticky").find("option[value="+$("#desktop_tag").val()+"]").attr("disabled",!0),$("#mobile_tag_sticky").selectpicker("refresh"),$(".box_display").addClass("d-none");else if(1===e){t===$("#mobile_tag_display").val()&&($("#mobile_tag_display").val("default"),$("#mobile_tag_display").selectpicker("refresh")),$("#mobile_tag_display").attr("name","mobile_tag"),$("#toolCopyTag .box-mobile-display").removeClass("d-none"),$("#toolCopyTag .box-mobile-sticky").addClass("d-none"),$("#mobile_tag_sticky").removeAttr("name"),$("#mobile_tag_display").find("option").attr("disabled",!1),$("#mobile_tag_display").find("option[value="+$("#desktop_tag").val()+"]").attr("disabled",!0),$("#mobile_tag_display").selectpicker("refresh"),$(".box_display").removeClass("d-none")}}function L(){var e=$(".input-color");e.on("input",(function(){$(this).next("input").val($(this).val())})),e.next("input").on("input",(function(e){$(this).prev("input").val(e.target.value)}))}function D(){$("#BoxAdtag").find("#template").val();"None"==$("#BoxAdtag").find("#template").find("option:selected",this).attr("data-layout")?($("#BoxAdtag").find("#content_source").closest(".sidebar-content").addClass("d-none"),$("#BoxAdtag").find("#playlist").closest(".sidebar-content").addClass("d-none"),$("#BoxAdtag").find("#passback_type_outstream").closest(".sidebar-content").removeClass("d-none"),x()):($("#BoxAdtag").find("#content_source").closest(".sidebar-content").removeClass("d-none"),$("#BoxAdtag").find("#playlist").closest(".sidebar-content").removeClass("d-none"),T(),$("#BoxAdtag").find("#passback_type_outstream").closest(".sidebar-content").addClass("d-none"),$("#BoxAdtag").find("#inline_tag_outstream").closest(".sidebar-content").addClass("d-none"),$("#BoxAdtag").find("#pass_back_outstream").closest(".sidebar-content").addClass("d-none"))}$(document).ready((function(){var t;a=$("#inventory_id").attr("data-inventory-id"),d+="?id="+a,$(".custom-tab").on("click",".nav-link",(function(){$(".custom-tab").find(".nav-link").removeClass("pp-4").removeClass("at-1"),$(this).addClass("pp-4"),"1"!=$(this).attr("data-tab")&&$(this).addClass("at-1")})),$("#tab-adtag").on("click",(function(){var e=$(n).serializeObject();e.tab=1,r=1,$("#btn-add-adtag").removeClass("d-none"),$("#btn-copy-adtag").removeClass("d-none"),$(".submit-config").closest(".dm6 ").addClass("d-none"),$(".submit-consent").closest(".dm6 ").addClass("d-none"),$(".history-a").addClass("d-none"),y(e)})),$("#tab-general").on("click",(function(){var e=$(n).serializeObject();e.tab=2,r=2,$("#btn-add-adtag").addClass("d-none"),$("#btn-copy-adtag").addClass("d-none"),$(".submit-config").closest(".dm6 ").removeClass("d-none"),$(".submit-consent").closest(".dm6 ").addClass("d-none"),$(".load-history").attr("data-object","inventory_config_fe").removeClass("d-none"),y(e)})),$("#tab-consent").on("click",(function(){var e=$(n).serializeObject();e.tab=3,r=3,$("#btn-add-adtag").addClass("d-none"),$("#btn-copy-adtag").addClass("d-none"),$(".submit-consent").closest(".dm6 ").removeClass("d-none"),$(".submit-config").closest(".dm6 ").addClass("d-none"),$(".load-history").attr("data-object","inventory_consent_fe").removeClass("d-none"),y(e)})),$("#tab-adstxt").on("click",(function(){var e=$(n).serializeObject();e.tab=4,r=4,$("#btn-add-adtag").addClass("d-none"),$("#btn-copy-adtag").addClass("d-none"),$(".submit-config").closest(".dm6 ").addClass("d-none"),$(".submit-consent").closest(".dm6 ").addClass("d-none"),$(".load-history").attr("data-object","inventory_adstxt_fe").removeClass("d-none"),y(e)})),$("#tab-connection").on("click",(function(){var e=$(n).serializeObject();e.tab=5,r=5,$("#btn-add-adtag").addClass("d-none"),$("#btn-copy-adtag").addClass("d-none"),$(".submit-config").closest(".dm6 ").addClass("d-none"),$(".submit-consent").closest(".dm6 ").addClass("d-none"),$(".load-history").attr("data-object","inventory_connection_fe").removeClass("d-none"),y(e)})),$("#tab-integration").on("click",(function(){var e=$(n).serializeObject();e.tab=6,r=6,$("#btn-add-adtag").addClass("d-none"),$("#btn-copy-adtag").addClass("d-none"),$(".submit-config").closest(".dm6 ").addClass("d-none"),$(".submit-consent").closest(".dm6 ").addClass("d-none"),$(".load-history").addClass("d-none"),y(e)})),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0,n=$("#"+e);$(".submit-config").on("click",(function(e){ProgressStart(),e.preventDefault();var s=$(this),i=s.text(),o="Loading...",d=n.serializeObject();d.ad_refresh_time=parseInt(d.ad_refresh_time),d.id=parseInt(d.id),d.inventory_id=parseInt(d.inventory_id),d.prebid_timeout=parseInt(d.prebid_timeout),d.gam_account=parseInt(d.gam_account),d.pb_render_mode=parseInt(d.pb_render_mode),d.fetch_margin_percent=parseInt(d.fetch_margin_percent),d.render_margin_percent=parseInt(d.render_margin_percent),d.mobile_scaling=parseInt(d.mobile_scaling),"on"===d.ad_refresh?d.ad_refresh=1:d.ad_refresh=2,"on"===d.gam_auto_create?d.gam_auto_create=1:d.gam_auto_create=2,"on"===d.safe_frame?d.safe_frame=1:d.safe_frame=2,"on"===d.direct_sales?d.direct_sales=1:d.direct_sales=2,$.ajax({url:t,type:"POST",dataType:"JSON",contentType:"application/json",data:JSON.stringify(d),beforeSend:function(e){s.addClass("disabled").attr("disabled",!0).text(o)},error:function(e,t){var a=AjaxErrorMessage(e,t);new AlertError("AJAX ERROR: "+a),s.removeClass("disabled").attr("disabled",!1).text(i)},success:function(e){s.removeClass("disabled").attr("disabled",!1).text(i)},complete:function(e){ProgressDone(),a(e.responseJSON,n)}})}))}("formGeneral","/websites/setup",v),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0,n=$("#"+e);$(".submit-consent").on("click",(function(e){ProgressStart(),e.preventDefault();var s=$(this),i=s.text(),o="Loading...";n.find("input").on("click change blur",(function(e){var t=$(this);t.hasClass("is-invalid")&&(t.removeClass("is-invalid").next(".invalid-feedback").empty(),t.removeClass("is-invalid").parent().removeClass("is-invalid").next(".invalid-feedback").empty())})),n.find("textarea").on("click change blur",(function(e){var t=$(this);t.hasClass("is-invalid")&&(t.removeClass("is-invalid").next(".invalid-feedback").empty(),t.removeClass("is-invalid").parent().removeClass("is-invalid").next(".invalid-feedback").empty())}));var d=n.serializeObject();d.id=parseInt(d.id),d.inventory_id=parseInt(d.inventory_id),"on"===d.gdpr?d.gdpr=1:d.gdpr=2,d.gdpr_timeout=parseInt(d.gdpr_timeout),"on"===d.ccpa?d.ccpa=1:d.ccpa=2,"on"===d.custom_brand?d.custom_brand=1:d.custom_brand=2,"on"===d.ad_refresh?d.ad_refresh=1:d.ad_refresh=2,"on"===d.direct_sales?d.direct_sales=1:d.direct_sales=2,d.ccpa_timeout=parseInt(d.ccpa_timeout),$.ajax({url:t,type:"POST",dataType:"JSON",contentType:"application/json",data:JSON.stringify(d),beforeSend:function(e){s.addClass("disabled").attr("disabled",!0).text(o)},error:function(e,t){var a=AjaxErrorMessage(e,t);new AlertError("AJAX ERROR: "+a),s.removeClass("disabled").attr("disabled",!1).text(i)},success:function(e){s.removeClass("disabled").attr("disabled",!1).text(i)},complete:function(e){ProgressDone(),a(e.responseJSON,n)}})}))}("formConsent","/websites/setupConsent",v),function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,s=$("#"+t);s.find(".submit").on("click",(function(t){t.preventDefault();var i=$(this),o=i.text(),d="Loading...";s.find("input").on("click change blur",(function(e){var t=$(this);t.hasClass("is-invalid")&&(t.removeClass("is-invalid").next(".invalid-feedback").empty(),t.removeClass("is-invalid").parent().removeClass("is-invalid").next(".invalid-feedback").empty())})),s.find("textarea").on("click change blur",(function(e){var t=$(this);t.hasClass("is-invalid")&&(t.removeClass("is-invalid").next(".invalid-feedback").empty(),t.removeClass("is-invalid").parent().removeClass("is-invalid").next(".invalid-feedback").empty())}));var r=s.serializeObject();r.inventory_id=parseInt(r.inventory_id),r.auction_delay=parseInt(r.auction_delay),r.sync_delay=parseInt(r.sync_delay),r.id=parseInt(r.id),r.module_params=($("#module-params > div.module_param_box").each((function(){$("input",this).each((function(){var t={},a=$(this).attr("data-option");t.type=$(this).attr("data-type"),t.name=$(this).attr("data-name"),t.template=this.value.trim();var n={storage:[],params:[],ab_testing:0,volume:0},s=parseInt($(this).attr("data-id")),i=l.map((function(e){return e.id})).indexOf(s);if(-1===i){switch(n.id=s,n.name=$(this).attr("data-module-name"),a){case"storage":n.storage=[t].concat(e(n.storage));break;case"params":n.params=[t].concat(e(n.params));break;case"ab_testing":this.checked?n.ab_testing=1:n.ab_testing=2;break;case"volume":n.volume=parseInt(this.value)}l.push(n)}else switch(a){case"storage":l[i].storage.push(t);break;case"params":l[i].params.push(t);break;case"ab_testing":this.checked?l[i].ab_testing=1:l[i].ab_testing=2;break;case"volume":l[i].volume=parseInt(this.value)}}))})),Object.values(l));var c=[],_=[];l.map((function(t){c=[].concat(e(c),[t.id])})),p.map((function(t){_=[].concat(e(_),[t.id])})),r.list_del=_.filter((function(e){return!c.includes(e)})),$.ajax({url:a,type:"POST",dataType:"JSON",contentType:"application/json",data:JSON.stringify(r),beforeSend:function(e){i.addClass("disabled").attr("disabled",!0).text(d)},error:function(e,t){var a=AjaxErrorMessage(e,t);new AlertError("AJAX ERROR: "+a),i.removeClass("disabled").attr("disabled",!1).text(o)},success:function(e){i.removeClass("disabled").attr("disabled",!1).text(o)},complete:function(e){l=[],p=[],f(),n(e.responseJSON,s)}})}))}("formUserId","/websites/setupUserId",v),$("#gdpr").is(":checked")?$(".gdpr_sub").attr("hidden",!1):$(".gdpr_sub").attr("hidden",!0),$("#ccpa").is(":checked")?$(".ccpa_sub").attr("hidden",!1):$(".ccpa_sub").attr("hidden",!0),$("#gdpr").on("change",(function(){this.checked?$("#enable_custom_gdpr").attr("hidden",!1):$("#enable_custom_gdpr").attr("hidden",!0)})),$("#ccpa").on("change",(function(){this.checked?$("#enable_custom_ccpa").attr("hidden",!1):$("#enable_custom_ccpa").attr("hidden",!0)})),$("#custom_brand").on("change",(function(){this.checked?$("#enable_custom_brand").attr("hidden",!1):$("#enable_custom_brand").attr("hidden",!0)})),$("#ad_refresh").on("change",(function(){this.checked?$("#enable_ad_refresh").attr("hidden",!1):$("#enable_ad_refresh").attr("hidden",!0)})),g(),f(),t="/websites/collapse",$("#formUserId").on("show.bs.collapse",".collapse",(function(e){var a=e.target.id;!function(e,t){var a=new URLSearchParams(window.location.search),n=Object.fromEntries(a.entries());$.ajax({url:e,type:"POST",dataType:"JSON",contentType:"application/json",data:JSON.stringify({is_collapse:2,box_collapse:t,page_type:"edit",page_id:parseInt(n.id)}),beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined")},error:function(e,t){var a=AjaxErrorMessage(e,t);new AlertError("AJAX ERROR: "+a)}}).done((function(e){}))}(t,a)})),$("#formUserId").on("hide.bs.collapse",".collapse",(function(e){var a=e.target.id;!function(e,t){var a=new URLSearchParams(window.location.search),n=Object.fromEntries(a.entries());$.ajax({url:e,type:"POST",dataType:"JSON",contentType:"application/json",data:JSON.stringify({is_collapse:1,box_collapse:t,page_type:"edit",page_id:parseInt(n.id)}),beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined")},error:function(e,t){var a=AjaxErrorMessage(e,t);new AlertError("AJAX ERROR: "+a)}}).done((function(e){}))}(t,a)})),$("#nav-integration").on("click",".build-tool",(function(){!function(e){var t=$("#toolCopyTag"),a=$(e),n=a.text(),s="Loading...",i=t.serializeObject();i.desktop_tag=parseInt(i.desktop_tag),i.mobile_tag=parseInt(i.mobile_tag),"on"===i.place_holder?i.place_holder=1:i.place_holder=2;var o="/websites/buildScript";$.ajax({url:o,type:"POST",contentType:"application/json",data:JSON.stringify(i),beforeSend:function(e){a.attr("disabled",!0).text(s)},error:function(e,t){var s=AjaxErrorMessage(e,t);new AlertError("AJAX ERROR: "+s),a.attr("disabled",!1).text(n)},success:function(e){a.attr("disabled",!1).text(n)}}).done((function(e){$("#nav-integration #script_build").text(e)}))}(this)})),$("#nav-integration").on("click",".build-playzone",(function(){!function(e){var t=$("#toolGenerateQuiz"),a=$(e),n=a.text(),s="Loading...",i=t.serializeObject();a.attr("disabled",!0).text(s);var o="";i.quiz&&(o='\n<div class="futureads" data-ad-slot="pw_'.concat(i.playzone_tag,'"></div> \n<script type="text/javascript"> \n    (vitag.Init = window.vitag.Init || []).push(function () { \n        viAPItag.initPlayZone(\'pw_').concat(i.playzone_tag,'\', { "quizIds": [').concat(i.quiz,"] }) \n    }) \n<\/script>")),$("#toolGenerateQuiz #code_snippet_quiz").text(o.trim()),a.attr("disabled",!1).text(n)}(this)})),$("#select-module").on("select2:select",(function(e){var t=$("#select-module").val(),a=$("#module").val();a.push(t),$("#collapseSettingBox").find("#ModuleParamBox-"+t).length||($("#module").val(a),$("#module").trigger("change"),function(e){var t=e.params.data,a=c.map((function(e){return e.id})).lastIndexOf(t.id);if(a>-1){var n=c[a].index+1;c.push({id:t.id,index:n}),m(t.id,t.text,n)}else c.push({id:t.id,index:1}),m(t.id,t.text,1)}(e)),$("#select-module").val(""),$("#select-module").trigger("change")})),$("#module").on("select2:unselect",(function(e){b(e.params.data.id)})),$(n).find(".submit").on("click",(function(e){e.preventDefault(),h(!0,!0)})),h(!1),$(s).on("click","tbody td div.btn-group a.remove",(function(e){var t=$(this).data("id");confirm('Are you sure archive!"')&&function(e){var t="/adtag/del";$.ajax({url:t,type:"POST",dataType:"JSON",contentType:"application/json",data:JSON.stringify({id:e}),beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined")},error:function(e,t){var a=AjaxErrorMessage(e,t);new AlertError("AJAX ERROR: "+a)}}).done((function(e){switch(e.status){case"success":NoticeSuccess("Ad tag has been removed successfully"),h(!0,!1);break;case"err":new AlertError(e.message)}}))}(t)})),$("#module-params").on("click",".export-dropdown a.remove_module_param",(function(){var e=$(this).data("id");b(e),function(e){var t=$("#module").val(),a=t.indexOf(e);-1!==a&&t.splice(a,1);$("#module").val(t).trigger("change")}(e.toString())})),$('[data-bs-toggle="popover"]').popover({html:!0,sanitize:!1}),$("#module-params").on("click","div.bidder-box .d a.rm_c",(function(){!function(e){$("#ModuleParamBox-"+e).remove();var t=[];$("#module-params").find(".module_param_box").each((function(){t.push($(this).attr("data-id"))})),$("#module").val(t),$("#module").trigger("change")}($(this).attr("data-id"))})),$("input").change((function(){$(this).removeClass("border-danger"),$(this).next("span.invalid-feedback").text("")})),u(),$("#load_ad_type").on("change",(function(){u()})),$(o).find(".submit").on("click",(function(e){e.preventDefault()})),$(".connection").change((function(e){!function(e){ProgressStart();var t=$(e).attr("data-bidder-id"),a=$(e).attr("data-inventory-id"),n=0;n=e.checked?1:2,$.ajax({url:"/websites/change-status-connection",type:"POST",dataType:"JSON",data:{inventory_id:parseInt(a),bidder_id:parseInt(t),status:n},beforeSend:function(t){$(e).addClass("disabled")},complete:function(e){},error:function(e,t){new AlertError("AJAX ERROR: "+ajaxErrorMessage(e,t))},success:function(t){var a;ProgressDone(),"error"===t.status?AlertError(t.message):(console.log(t),a=0,$("#nav-connection").find(".item").each((function(){$(this).find("input").is(":checked")||(a+=1)})),a?$(".numberCircle ").text(a).removeClass("d-none"):$(".numberCircle ").text(a).addClass("d-none"),NoticeSuccess("Changed!"),1==n?($(e).closest(".item").find(".status").addClass("pp23").removeClass("pp-23"),$(e).closest(".item").find(".status-text").text("Live")):($(e).closest(".item").find(".status").addClass("pp-23").removeClass("pp23"),$(e).closest(".item").find(".status-text").text("Waiting")))}})}(this)})),$("#nav-integration").on("change",".select-ad-size",(function(){var e=$(this).val();"all"===e?($(".ad-size-all").removeClass("d-none"),$(".ad-size-responsive").addClass("d-none"),$(".ad-size-fixed").addClass("d-none")):"fixed"===e?($(".ad-size-fixed").removeClass("d-none"),$(".ad-size-all").addClass("d-none"),$(".ad-size-responsive").addClass("d-none")):"responsive"===e&&($(".ad-size-responsive").removeClass("d-none"),$(".ad-size-all").addClass("d-none"),$(".ad-size-fixed").addClass("d-none"))})),document.querySelectorAll("body").forEach((function(e){e.addEventListener("click",(function(e){document.querySelector(".customize-sidebar")&&!document.querySelector(".customize-sidebar").contains(e.target)&&($("#BoxAdtag").hasClass("close-sidebar")?document.querySelector("body").classList.remove("customize-box"):document.querySelector("body").classList.add("customize-box"))}))})),$("#btn-close").on("click",(function(){$("#BoxAdtag").addClass("close-sidebar")})),$("#BoxAdtag").on("click",".btn-close-sidebar",(function(){$("#btn-close").click()}))})),$(document).ready((function(){var e,t=$("#BoxAdtag");$("#btn-add-adtag").click((function(){$("#BoxAdtag").removeClass("close-sidebar"),function(){var e=$("#btn-add-adtag").attr("data-id");if(!e)return;$("#BoxAdtag").find("h3 span.sidebar-title").text("Create New Ad Tag"),$("#BoxAdtag").find(".history-a").addClass("d-none"),$("#BoxAdtag").append(Loading()),$.ajax({type:"GET",url:"/adtag/add",data:{inventoryId:e}}).done((function(e){e.error||($("#BoxAdtag").find(".result-adtag").html(e),$("#BoxAdtag").find("._blur").remove(),$("#BoxAdtag").find(".selectpicker").selectpicker("refresh"),T(),S(),w(),z(),B(),x(),L(),C(),A(),k(),_(),function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=$("#BoxAdtag").find("#"+e);n.find(".selectpicker").on("changed.bs.select",(function(e,t,a,n){$(this).closest(".box-selectpicker").find(".bs-placeholder").attr("style","border-color:#a0acc2 !important"),$(this).closest(".box-selectpicker").removeClass("is-invalid")})),n.find(".submit-adtag").on("click",(function(e){e.preventDefault();var s=$(this),i=s.text(),o="Loading...",d=n.serializeObject(),r=[];d.additional_ad_size&&d.additional_ad_size.constructor===Array?$.each(d.additional_ad_size,(function(e,t){r.push(parseInt(t))})):r.push(parseInt(d.additional_ad_size)),d.additional_ad_size=r;var c=[];d.additional_ad_size_mobile&&d.additional_ad_size_mobile.constructor===Array?$.each(d.additional_ad_size_mobile,(function(e,t){c.push(parseInt(t))})):c.push(parseInt(d.additional_ad_size_mobile)),d.additional_ad_size_mobile=c;var l=[];d.size_sticky_mobile&&d.size_sticky_mobile.constructor===Array?$.each(d.size_sticky_mobile,(function(e,t){l.push(parseInt(t))})):l.push(parseInt(d.size_sticky_mobile)),d.additional_ad_size_mobile_stick=l;var p=[];d.size_sticky&&d.size_sticky.constructor===Array?$.each(d.size_sticky,(function(e,t){p.push(parseInt(t))})):p.push(parseInt(d.size_sticky)),d.additional_ad_size_desktop_stick=p,d.ad_tag_type=parseInt(d.ad_tag_type),d.content_source_articles=parseInt(d.content_source_articles),d.content_type=parseInt(d.content_type),d.content_source=parseInt(d.content_source),d.playlist=parseInt(d.playlist),d.primary_ad_size?d.primary_ad_size=parseInt(d.primary_ad_size):d.primary_ad_size=0,d.size_on_mobile?d.size_on_mobile=parseInt(d.size_on_mobile):d.size_on_mobile=0,d.passback_type_outstream=parseInt(d.passback_type_outstream),d.inline_tag_outstream=parseInt(d.inline_tag_outstream),d.template=parseInt(d.template),d.template_articles=parseInt(d.template_articles),d.template_outstream=parseInt(d.template_outstream),d.inventory_id=parseInt(d.inventory_id),d.position_sticky=parseInt(d.position_sticky),d.position_sticky_mobile=parseInt(d.position_sticky_mobile),d.size_sticky=parseInt(d.size_sticky),d.size_sticky_mobile=parseInt(d.size_sticky_mobile),d.renderer_instream=parseInt(d.renderer_instream),d.renderer_outstream=parseInt(d.renderer_outstream),d.total_ads=parseInt(d.total_ads),d.template_play_zone=parseInt(d.template_play_zone),d.content_source_play_zone=parseInt(d.content_source_play_zone),d.ad_size=parseInt(d.ad_size),d.responsive_type=parseInt(d.responsive_type),d.template_native=parseInt(d.template_native),d.ad_refresh_time=parseInt(d.ad_refresh_time),"on"===d.close_button_sticky?d.close_button_sticky=1:d.close_button_sticky=2,d.close_button_sticky_mobile&&("on"===d.close_button_sticky_mobile?d.close_button_sticky_mobile=1:d.close_button_sticky_mobile=2),d.bid_out_stream&&("on"===d.bid_out_stream?d.bid_out_stream=1:d.bid_out_stream=2),"on"===d.status||"ON"===d.status||"running"===d.status?d.status=1:d.status=2,"on"===d.shift_content?d.shift_content=1:d.shift_content=2,$("#enable_sticky_desktop").is(":checked")?d.enable_sticky_desktop=1:d.enable_sticky_desktop=2,$("#enable_sticky_mobile").is(":checked")?d.enable_sticky_mobile=1:d.enable_sticky_mobile=2,"on"===d.banner_ad?d.banner_ad=1:d.banner_ad=2,"on"===d.video_ad?d.video_ad=1:d.video_ad=2,1===d.ad_tag_type||5===d.ad_tag_type?"domain_configuration"===d.ad_refresh&&delete d.ad_refresh_time:(delete d.ad_refresh,delete d.ad_refresh_time),"on"===d.sticky4k?d.sticky4k="on":d.sticky4k="off",$.ajax({url:a,type:"POST",dataType:"JSON",contentType:"application/json",data:JSON.stringify(d),beforeSend:function(e){s.prop("disabled",!0).text(o)},error:function(e,t){var a=AjaxErrorMessage(e,t);new AlertError("AJAX ERROR: "+a),s.prop("disabled",!1).text(i)},success:function(e){s.prop("disabled",!1).text(i)},complete:function(e){t(e.responseJSON,n)}})}))}("AddAdTag",j,"/adtag/add"))}))}()})),$(".tab-content").on("click",".edit-adtag",(function(){$("#BoxAdtag").removeClass("close-sidebar"),function(e){var t=e.attr("data-id"),a=e.attr("data-inventory");if(!a||!t)return;$("#BoxAdtag").append(Loading()),$("#BoxAdtag").find("h3 span.sidebar-title").text("Edit Ad Tag"),$("#BoxAdtag").find(".load-history").removeClass("d-none").attr("data-id",t),$.ajax({type:"GET",url:"/adtag/edit",data:{id:t,inventoryId:a}}).done((function(e){var t,a,n;e.error||($("#BoxAdtag").find(".result-adtag").html(e),$("#BoxAdtag").find("._blur").remove(),$("#BoxAdtag").find(".selectpicker").selectpicker("refresh"),t="/adtag/collapse",a=new URLSearchParams(window.location.search),n=Object.fromEntries(a.entries()),$("#BoxAdtag").find(".collapse").on("show.bs.collapse",(function(e){var a=e.target.id;!function(e,t,a,n){$.ajax({url:e,type:"POST",dataType:"JSON",contentType:"application/json",data:JSON.stringify({is_collapse:2,box_collapse:t,page_type:n,page_id:a}),beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined")},error:function(e,t){}}).done((function(e){}))}(t,a,parseInt(n.id),"edit")})),$("#BoxAdtag").find(".collapse").on("hide.bs.collapse",(function(e){var a=e.target.id;!function(e,t,a,n){$.ajax({url:e,type:"POST",dataType:"JSON",contentType:"application/json",data:JSON.stringify({is_collapse:1,box_collapse:t,page_type:n,page_id:a}),beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined")},error:function(e,t){}}).done((function(e){}))}(t,a,parseInt(n.id),"edit")})),T(),S(),w(),z(),B(),x(),N(),L(),C(!0),A(),k(),_(),function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=$("#BoxAdtag").find("#"+e);n.find(".selectpicker").on("changed.bs.select",(function(e,t,a,n){$(this).closest(".box-selectpicker").find(".bs-placeholder").attr("style","border-color:#a0acc2 !important"),$(this).closest(".box-selectpicker").removeClass("is-invalid")})),n.find(".submit").on("click",(function(e){e.preventDefault();var s=$(this),i=s.text(),o="Loading...",d=n.serializeObject(),r=[];d.additional_ad_size&&d.additional_ad_size.constructor===Array?$.each(d.additional_ad_size,(function(e,t){r.push(parseInt(t))})):r.push(parseInt(d.additional_ad_size)),d.additional_ad_size=r;var c=[];d.additional_ad_size_mobile&&d.additional_ad_size_mobile.constructor===Array?$.each(d.additional_ad_size_mobile,(function(e,t){c.push(parseInt(t))})):c.push(parseInt(d.additional_ad_size_mobile)),d.additional_ad_size_mobile=c;var l=[];d.size_sticky_mobile&&d.size_sticky_mobile.constructor===Array?$.each(d.size_sticky_mobile,(function(e,t){l.push(parseInt(t))})):l.push(parseInt(d.size_sticky_mobile)),d.additional_ad_size_mobile_stick=l;var p=[];d.size_sticky&&d.size_sticky.constructor===Array?$.each(d.size_sticky,(function(e,t){p.push(parseInt(t))})):p.push(parseInt(d.size_sticky)),d.additional_ad_size_desktop_stick=p,d.id=parseInt(d.id),d.ad_tag_type=parseInt($("#ad_tag_type").val()),d.content_source_articles=parseInt(d.content_source_articles),d.content_type=parseInt(d.content_type),d.content_source=parseInt(d.content_source),d.playlist=parseInt(d.playlist),d.primary_ad_size?d.primary_ad_size=parseInt(d.primary_ad_size):d.primary_ad_size=0,d.size_on_mobile?d.size_on_mobile=parseInt(d.size_on_mobile):d.size_on_mobile=0,d.passback_type_outstream=parseInt(d.passback_type_outstream),d.inline_tag_outstream=parseInt(d.inline_tag_outstream),d.template=parseInt(d.template),d.template_articles=parseInt(d.template_articles),d.template_outstream=parseInt(d.template_outstream),d.inventory_id=parseInt(d.inventory_id),d.position_sticky=parseInt(d.position_sticky),d.position_sticky_mobile=parseInt(d.position_sticky_mobile),d.size_sticky=parseInt(d.size_sticky),d.size_sticky_mobile=parseInt(d.size_sticky_mobile),d.renderer_instream=parseInt(d.renderer_instream),d.renderer_outstream=parseInt(d.renderer_outstream),d.template_play_zone=parseInt(d.template_play_zone),d.content_source_play_zone=parseInt(d.content_source_play_zone),d.total_ads=parseInt(d.total_ads),d.ad_size=parseInt(d.ad_size),d.responsive_type=parseInt(d.responsive_type),d.template_native=parseInt(d.template_native),d.ad_refresh_time=parseInt(d.ad_refresh_time),"on"===d.close_button_sticky?d.close_button_sticky=1:d.close_button_sticky=2,d.close_button_sticky_mobile&&("on"===d.close_button_sticky_mobile?d.close_button_sticky_mobile=1:d.close_button_sticky_mobile=2),d.bid_out_stream&&("on"===d.bid_out_stream?d.bid_out_stream=1:d.bid_out_stream=2),"on"===d.status||"ON"===d.status||"running"===d.status?d.status=1:d.status=2,"on"===d.shift_content?d.shift_content=1:d.shift_content=2,$("#enable_sticky_desktop").is(":checked")?d.enable_sticky_desktop=1:d.enable_sticky_desktop=2,$("#enable_sticky_mobile").is(":checked")?d.enable_sticky_mobile=1:d.enable_sticky_mobile=2,"on"===d.banner_ad?d.banner_ad=1:d.banner_ad=2,"on"===d.video_ad?d.video_ad=1:d.video_ad=2,1===d.ad_tag_type||5===d.ad_tag_type?"domain_configuration"===d.ad_refresh&&delete d.ad_refresh_time:(delete d.ad_refresh,delete d.ad_refresh_time),"on"===d.sticky4k?d.sticky4k="on":d.sticky4k="off",$.ajax({url:a,type:"POST",dataType:"JSON",contentType:"application/json",data:JSON.stringify(d),beforeSend:function(e){s.prop("disabled",!0).text(o)},error:function(e,t){var a=AjaxErrorMessage(e,t);new AlertError("AJAX ERROR: "+a),s.prop("disabled",!1).text(i)},success:function(e){s.prop("disabled",!1).text(i)},complete:function(e){t(e.responseJSON,n)}})}))}("EditAdTag",E,"/adtag/edit"))}))}($(this))})),t.on("change","#ad_tag_type",(function(){var e=$(this).val();t.find(".box-config").attr("hidden",!0),t.find('*[data-adtype="'+e+'"]').attr("hidden",!1),t.find("span.select2-container--bootstrap").css("width","100%"),"5"===e?(t.find(".box_shift_content").removeClass("d-none"),t.find(".ad_refresh").removeClass("d-none")):(t.find(".box_shift_content").addClass("d-none"),t.find(".ad_refresh").addClass("d-none")),"1"===e||"5"===e?t.find(".ad_refresh").removeClass("d-none"):t.find(".ad_refresh").addClass("d-none"),D()})),$("#BoxAdtag").on("click",".toggle-collapse",(function(){$(this).find('a[data-bs-toggle="collapse"]')[0].click()})),$("#BoxAdtag").on("change","#passback_type_outstream",(function(){x()})),$("#BoxAdtag").on("change","#content_source",(function(){T()})),$("#BoxAdtag").on("change","#content_source_articles",(function(){T()})),$("#BoxAdtag").on("change","#renderer_instream",(function(){N()})),$("#BoxAdtag").on("change","#renderer_outstream",(function(){N()})),$("#BoxAdtag").on("click","#btn-close",(function(){$("body").removeClass("customize-box")})),$("body").on("click",".customize-btn",(function(){$("body").addClass("customize-box")})),(e=$("#BoxAdtag")).on("change","input",(function(e){var t=$(this);t.hasClass("is-invalid")&&t.removeClass("is-invalid").next(".invalid-feedback").empty()})),e.on("change","textarea",(function(e){var t=$(this);t.hasClass("is-invalid")&&t.removeClass("is-invalid").next(".invalid-feedback").empty()})),e.on("change","select",(function(e){var t=$(this);t.hasClass("is-invalid")&&t.removeClass("is-invalid").next(".invalid-feedback").empty()})),e.on("change","select2",(function(e){var t=$(this);t.parent().next("span.invalid-feedback").empty(),t.parent().find(".select2-container--bootstrap .select2-selection--single").css("border-color","#ebedf2")})),e.on("change",".selectpicker",(function(e){var t=$(this);t.closest(".is-invalid").next("span.invalid-feedback").empty(),t.parent().find(".dropdown-toggle").css("border-color","#ebedf2")}))})),$(document).ready((function(){a=$("#inventory_id").attr("data-inventory-id"),$("#resultLoadMissingLine").on("click",".copy-line",(function(){!function(e){var t="",a=".ads-line";"entire"!==e&&(a=".ads-line-missing");$(a).each((function(e){var a=$(this).text();a&&(t+=a+"\n")})),CopyTextToClipboard(t);var n=$("#CopyAdsTxt"),s=n.html();n.attr("disabled",!0).text("Copied!"),setTimeout((function(){n.attr("disabled",!1).html(s)}),1e3)}($(this).data("type"))})),SubmitForm("scanAds",(function(e){R(),"success"===e.status?NoticeSuccess(e.message):new NoticeError(e.message)}),"/ads_txt/scan"),SubmitForm("SaveAdsTxt",J,"/ads_txt/detail?did="+a)})),$(document).ready((function(){P($("#inventoryTabs").attr("data-id")),$("#nav-integration").on("change",".js-load-type",(function(){var e=$(this).val();e&&("asynchronous"==e?($("#nav-integration").find(".js-type-asynchronous").removeClass("d-none").css("opacity","0").animate({opacity:"1"}),$("#nav-integration").find(".js-type-normal").addClass("d-none")):"normal"==e&&($("#nav-integration").find(".js-type-asynchronous").addClass("d-none"),$("#nav-integration").find(".js-type-normal").removeClass("d-none").css("opacity","0").animate({opacity:"1"})))})),$("#nav-integration").on("click",".copy-adtag",(function(e){var t,a;t=$(this),a=t.attr("data-id"),t.closest("tr").find("#pw_"+a).select(),document.execCommand("copy"),t.text("Copies"),setTimeout((function(){t.html('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="ds-icon-dashboard-copy">\n                                <path d="M19.75 8.69h-2.37V6.31a2 2 0 0 0-2-2H4.25a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h2.37v2.38a2 2 0 0 0 2 2h11.13a2 2 0 0 0 2-2v-7a2 2 0 0 0-2-2zm-15.5 4.62v-7h11.13v2.38H8.62a2 2 0 0 0-2 2v2.62zm15.5 4.38H8.62v-7h11.13z">\n                                </path>\n                            </svg>')}),1500)})),$(".customize-sidebar").on("click",".load-history",(function(){$("body").removeClass("customize-box")}))}))})();