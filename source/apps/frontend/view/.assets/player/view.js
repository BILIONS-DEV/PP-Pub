(()=>{var o=[".jpg",".jpeg",".bmp",".gif",".png"],e="https://ul.pubpowerplatform.io";function n(){var o=$("#type").val(),e=$("#player_layout").val(),n=$("#auto_skip").is(":checked"),t=$(".box-auto-skip"),a=$(".box-time-to-skip"),s=$(".box-show-auto-skips-button"),i=$(".box-number-of-pre-roll"),l=$(".box-delay");"2"===o&&"8"!==e?(t.removeClass("d-none"),n?(a.removeClass("d-none"),s.removeClass("d-none"),i.removeClass("d-none"),l.addClass("d-none")):(a.addClass("d-none"),s.addClass("d-none"),i.addClass("d-none"),l.removeClass("d-none"))):(t.addClass("d-none"),a.addClass("d-none"),s.addClass("d-none"),i.addClass("d-none"),l.removeClass("d-none"))}function t(){var o=$("#type").val(),e=$("#player_layout").val(),n=$("#show_main_title"),t=($("#show_content_title"),$("#show_content_description"),$(".box-show-content-desc"));"2"===o?"3"===e||"4"===e||"5"===e||"7"===e||"8"===e?t.removeClass("d-none"):t.addClass("d-none"):t.removeClass("d-none");$("#show_controls"),$("#main_title_text");"2"===o&&n.is(":checked")}function a(){var o=$("#position_desktop").val(),e=$(".position_desktop");e.addClass("d-none"),"1"===o?e=$(".position_desktop_bottom_right"):"2"===o?e=$(".position_desktop_bottom_left"):"3"===o?e=$(".position_desktop_top_right"):"4"===o&&(e=$(".position_desktop_top_left")),e.removeClass("d-none")}function s(){var o=$("#position_mobile").val(),e=$(".position_mobile");e.addClass("d-none"),"1"===o?e=$(".position_mobile_bottom_right"):"2"===o&&(e=$(".position_mobile_bottom_left")),e.removeClass("d-none")}function i(){$("#floating_on_desktop").is(":checked"),$(".floating_on_desktop")}function l(){$("#floating_on_mobile").is(":checked"),$(".floating_on_mobile")}function r(){var o=$('input[name="size"]:checked').val(),e=$(".box-width"),n=$(".box-ratio");"1"===o?(e.addClass("d-none"),n.removeClass("d-none")):"2"===o&&(n.addClass("d-none"),e.removeClass("d-none"))}function _(){var o=$("#formTemplate").serializeObject();o=function(o){return o.id=parseInt(o.id),o.type=parseInt(o.type),o.vast_retry=parseInt(o.vast_retry),o.delay=parseInt(o.delay),o.time_to_skip=parseInt(o.time_to_skip),o.max_width=parseInt(o.max_width),o.width=parseInt(o.width),o.floating_width=parseInt(o.floating_width),o.floating_width_mobile=parseInt(o.floating_width_mobile),o.margin_bottom_desktop=parseInt(o.margin_bottom_desktop),o.margin_bottom_mobile=parseInt(o.margin_bottom_mobile),o.margin_left_desktop=parseInt(o.margin_left_desktop),o.margin_left_mobile=parseInt(o.margin_left_mobile),o.margin_right_desktop=parseInt(o.margin_right_desktop),o.margin_right_mobile=parseInt(o.margin_right_mobile),o.margin_top_desktop=parseInt(o.margin_top_desktop),o.columns_number=parseInt(o.columns_number),o.columns_position=parseInt(o.columns_position),o.columns_number=parseInt(o.columns_number),o.player_layout=parseInt(o.player_layout),o.show_auto_skip_button=parseInt(o.show_auto_skip_button),o.number_of_pre_roll_ads=parseInt(o.number_of_pre_roll_ads),o.floating_position_desktop=parseInt(o.floating_position_desktop),o.floating_position_mobile=parseInt(o.floating_position_mobile),o.play_mode=parseInt(o.play_mode),o.advertisement_scenario=parseInt(o.advertisement_scenario),o.size=parseInt(o.size),o.auto_start=parseInt(o.auto_start),o.main_title_top_article=o.main_title_text,o.link=$("#preview-logo").attr("src"),"on"===o.close_floating_button_mobile?o.close_floating_button_mobile=1:o.close_floating_button_mobile=2,"on"===o.close_floating_button_desktop?o.close_floating_button_desktop=1:o.close_floating_button_desktop=2,"on"===o.default_sound_mode?o.default_sound_mode=1:o.default_sound_mode=2,"on"===o.description_enable?o.description_enable=1:o.description_enable=2,"on"===o.show_controls?o.show_controls=1:o.show_controls=2,"on"===o.floating_on_desktop?o.floating_on_desktop=1:o.floating_on_desktop=2,"on"===o.floating_on_mobile?o.floating_on_mobile=1:o.floating_on_mobile=2,"on"===o.main_title?o.main_title=1:o.main_title=2,"on"===o.title_enable?o.title_enable=1:o.title_enable=2,"on"===o.powered_by?o.powered_by=1:o.powered_by=2,"on"===o.powered_by_top_article?o.powered_by_top_article=1:o.powered_by_top_article=2,"on"===o.share_button?o.share_button=1:o.share_button=2,"on"===o.video_config?o.video_config=1:o.video_config=2,"on"===o.show_stats?o.show_stats=1:o.show_stats=2,"on"===o.fullscreen_button?o.fullscreen_button=1:o.fullscreen_button=2,"on"===o.next_prev_arrows_button?o.next_prev_arrows_button=1:o.next_prev_arrows_button=2,"on"===o.next_prev_time?o.next_prev_time=1:o.next_prev_time=2,o.custom_logo_top_article=1,o.custom_logo=1,"on"===o.enable_logo?o.enable_logo=1:o.enable_logo=2,o.enable_logo_top_article=o.enable_logo,"on"===o.auto_skip?o.auto_skip=1:o.auto_skip=2,"on"===o.float_on_bottom?o.float_on_bottom=1:o.float_on_bottom=2,"on"===o.floating_on_view?o.floating_on_view=1:o.floating_on_view=2,"on"===o.float_on_bottom_mobile?o.float_on_bottom_mobile=1:o.float_on_bottom_mobile=2,"on"===o.floating_on_view_mobile?o.floating_on_view_mobile=1:o.floating_on_view_mobile=2,"on"===o.floating_on_impression?o.floating_on_impression=1:o.floating_on_impression=2,"on"===o.wait_for_ad?o.wait_for_ad=1:o.wait_for_ad=2,"on"===o.pre_roll?o.pre_roll=1:o.pre_roll=2,"on"===o.mid_roll?o.mid_roll=1:o.mid_roll=2,"on"===o.post_roll?o.post_roll=1:o.post_roll=2,o}(o),$.ajax({url:"/player/template/preview",type:"POST",dataType:"JSON",contentType:"application/json",data:JSON.stringify(o),success:function(o){document.querySelector("#videocontainer").innerHTML="",(vitag.Init=window.vitag.Init||[]).push((function(){viAPItag.initPowerVideoContainer(o)}))}})}function d(){var o,e,_,d;"2"===$("#type").val()?$(".box-player-layout").removeClass("d-none"):$(".box-player-layout").addClass("d-none"),r(),i(),l(),a(),s(),t(),function(){var o=$("#type").val(),e=$("#player_layout").val(),n=$(".box-controls-color");"2"===o?"8"!==e?(n.removeClass("d-none"),n=$("#control_color")):n.addClass("d-none"):"3"===o?(n.removeClass("d-none"),n=$("#control_color")):n.addClass("d-none");var t=$(".box-background-color");("2"===o||"3"===o)&&(t.removeClass("d-none"),t=$("#background_color"));var a=$(".box-title-color");("2"===o||"3"===o)&&(a.removeClass("d-none"),a=$("#title_color"));var s=$(".box-description-color");"2"===o?"3"===e||"4"===e||"5"===e||"7"===e?(s.removeClass("d-none"),s=$("#description_color")):s.addClass("d-none"):"3"===o?(s.removeClass("d-none"),s=$("#description_color")):s.addClass("d-none");var i=$(".box-theme-color");"2"===o&&"8"===e?i.removeClass("d-none"):i.addClass("d-none");var l=$(".box-title-background-color");"2"===o&&"8"===e?l.removeClass("d-none"):l.addClass("d-none")}(),$("#type").val(),$(".controls"),$("#type").val(),$(".logo-config"),o=$("#type").val(),e=$("#player_layout").val(),_=$(".box-columns-number"),d=$("#columns_number_two"),"2"===o&&"6"===e?(_.removeClass("d-none"),d.prop("checked",!0)):_.addClass("d-none"),function(){var o=$("#type").val(),e=$("#player_layout").val(),n=$(".box-columns-position"),t=$("#columns_position_right");"2"!==o||"6"!==e&&"7"!==e?n.addClass("d-none"):(n.removeClass("d-none"),t.prop("checked",!0))}(),n()}function p(o,n){var t=new FormData,a=o.target.files[0];a.size>15728640?new AlertError("You uploaded file over 10mb, please choose another file!"):(t.append("file",a),$.ajax({url:"https://ul.pubpowerplatform.io/api/v1/image",type:"POST",contentType:!1,processData:!1,data:t,beforeSend:function(o){},error:function(o,e){var n=AjaxErrorMessage(o,e);new AlertError("AJAX ERROR: "+n)},success:function(o){},complete:function(o){!function(o,n){switch(o.status){case"error":1===o.errors.length&&""===o.errors[0].id?new AlertError(o.errors[0].message):o.errors.length>0?($.each(o.errors,(function(o,e){$("#"+e.id).addClass("is-invalid").nextAll("span.invalid-feedback").text(e.message)})),new AlertError(o.errors[0].message)):new AlertError("Error!");break;case"success":$("#preview-logo").attr("src",e+o.data_object.thumb[0]),$("#logo").attr("value",o.data_object.thumb[0]);break;default:new AlertError("Undefined")}}(o.responseJSON)}}))}$(document).ready((function(){var e;$('[data-bs-toggle="popover"]').popover({html:!0,sanitize:!1}),$("#slider-container").css("cursor","not-allowed"),$(".slide").css("pointer-events","none"),$(".slide img").css("cursor","not-allowed"),d(),$(".template-tab").on("click",".nav-link",(function(){$(".template-tab").find(".nav-link").removeClass("pp-4"),$(this).addClass("pp-4"),$(".nav-link").removeClass("at-1"),"1"!==$(this).attr("data-tab")&&$(this).addClass("at-1")})),$("#type").on("change",(function(){d()})),$(".slide").on("click",(function(){$(".slide").removeClass("selected"),$(this).addClass("selected");var o=$(this).data("value");$(this).prevAll("#player_layout").attr("value",o),d()})),$("input[type=radio][name=size]").change((function(){r()})),$(".play_mode").on("click",(function(){$(".play_mode").removeClass("pt52"),$(this).addClass("pt52");var o=$(this).data("type");$(".box-play-mode").addClass("d-none"),$(".box-"+o).removeClass("d-none")})),$("#floating_on_desktop").change((function(){i(),_()})),$("#floating_on_mobile").change((function(){l(),_()})),$("#position_desktop").on("change",(function(){a(),_()})),$("#position_mobile").on("change",(function(){s(),_()})),$("#show_main_title").change((function(){t()})),(e=$(".input-color")).on("input",(function(){$(this).next("input").val($(this).val())})),e.on("change",(function(){_()})),e.next("input").on("input",(function(o){$(this).prev("input").val(o.target.value)})),e.next("change",(function(){_()})),$(".btn-add-logo").on("click",(function(){$("#logo").click()})),$("#logo").on("change",(function(e){!function(o,e,n){var t=o[0];if("file"===t.type){var a=t.value;if(a.length>0){for(var s=!1,i=0;i<e.length;i++){var l=e[i];if(a.substr(a.length-l.length,l.length).toLowerCase()===l.toLowerCase()){s=!0,p(n,o);break}}if(!s)new AlertError("Sorry, "+a+" is invalid, allowed extensions are: "+e.join(", "))}}}($(this),o,e)})),$("#auto_skip").change((function(){n(),_()})),$("input").on("change",(function(){_()})),document.getElementById("myFieldset").disabled=!0}))})();